<!DOCTYPE html>
<!-- saved from url=(0060)http://gabrielduarte77.wordpress.com/category/yii-framework/ -->
<html lang="es"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>Yii Framework « Pregúntale Al Gabo</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" type="text/css" media="all" href="./parte2_files/style.css">
<link rel="pingback" href="http://gabrielduarte77.wordpress.com/xmlrpc.php">
<link rel="alternate" type="application/rss+xml" title="Pregúntale Al Gabo » Feed" href="http://gabrielduarte77.wordpress.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Pregúntale Al Gabo » RSS de los comentarios" href="http://gabrielduarte77.wordpress.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Pregúntale Al Gabo » Yii Framework RSS de la categoría" href="http://gabrielduarte77.wordpress.com/category/yii-framework/feed/">
<script src="./parte2_files/quant.js" async="" type="text/javascript"></script><script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" id="all-css-0" href="./parte2_files/saved_resource" type="text/css" media="all">
<link rel="stylesheet" id="print-css-0" href="./parte2_files/global-print.css" type="text/css" media="print">
<script type="text/javascript">
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"No se ha completado su suscripcion, por favor intentelo de nuevo con una direcci\u00f3n de correo valida."};
/* ]]> */
</script>
<script type="text/javascript" src="./parte2_files/saved_resource(1)"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://gabrielduarte77.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://gabrielduarte77.wordpress.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress.com">
<link rel="shortcut icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976027g" sizes="16x16 24x24 32x32 48x48">
<link rel="icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976027g" sizes="16x16 24x24 32x32 48x48">
<link rel="apple-touch-icon-precomposed" href="http://s0.wp.com/i/webclip.png?m=1311618091g">
<link rel="openid.server" href="http://gabrielduarte77.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="http://gabrielduarte77.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="http://gabrielduarte77.wordpress.com/osd.xml" title="Pregúntale Al Gabo">
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com">
		<style>
		/* <![CDATA[ */
		/* Block: reblog */
		
		.reblog-from img                   { margin: 0 10px 0 0; vertical-align: middle; padding: 0; border: 0; }
		.reblogger-note img.avatar         { float: left; padding: 0; border: 0; }
		.reblogger-note-content            { margin: 0 0 20px; }
		.reblog-post .wpcom-enhanced-excerpt-content { border-left: 3px solid #eee; padding-left: 15px; }
		.reblog-post ul.thumb-list         { display: block; list-style: none; margin: 2px 0; padding: 0; clear: both; }
		.reblog-post ul.thumb-list li      { display: inline; margin: 0; padding: 0 1px; border: 0; }
		.reblog-post ul.thumb-list li a    { margin: 0; padding: 0; border: 0; }
		.reblog-post ul.thumb-list li img  { margin: 0; padding: 0; border: 0; }
		
		.reblog-post .wpcom-enhanced-excerpt { clear: both; }
		
		.reblog-post .wpcom-enhanced-excerpt address,
		.reblog-post .wpcom-enhanced-excerpt li,
		.reblog-post .wpcom-enhanced-excerpt h1,
		.reblog-post .wpcom-enhanced-excerpt h2,
		.reblog-post .wpcom-enhanced-excerpt h3,
		.reblog-post .wpcom-enhanced-excerpt h4,
		.reblog-post .wpcom-enhanced-excerpt h5,
		.reblog-post .wpcom-enhanced-excerpt h6,
		.reblog-post .wpcom-enhanced-excerpt p { font-size: 100% !important; }
		
		.reblog-post .wpcom-enhanced-excerpt blockquote,
		.reblog-post .wpcom-enhanced-excerpt pre,
		.reblog-post .wpcom-enhanced-excerpt code,
		.reblog-post .wpcom-enhanced-excerpt q { font-size: 98% !important; }
		

		/* ]]> */		
		</style>
		<meta name="application-name" content="Pregúntale Al Gabo"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Música, Software y Base de Datos"><meta name="msapplication-task" content="name=Subscribir;action-uri=http://gabrielduarte77.wordpress.com/feed/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Registrar un blog gratuito;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Soporte de WordPress.com;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Foros de WordPress.com;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="title" content="Entradas sobre Yii Framework en Pregúntale Al Gabo">
<meta name="description" content="Posts about Yii Framework written by gabrielduarte77">
<link rel="stylesheet" type="text/css" href="./parte2_files/shThemeDefault.css"><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./parte2_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./parte2_files/services.css"></head>

<body class="archive category category-yii-framework category-15920252 content-sidebar highlander-enabled highlander-light" data-twttr-rendered="true">
<div id="page">

	<div id="container">

		<ul class="skip">
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#access">Skip to navigation</a></li>
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#main">Skip to main content</a></li>
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#sidebar">Skip to primary sidebar</a></li>
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#sidebar2">Skip to secondary sidebar</a></li>
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#footer">Skip to footer</a></li>
		</ul>

		<div id="header">
			<div id="branding" class="clear-block">
							<h3 id="logo">
				<span>
					<a href="http://gabrielduarte77.wordpress.com/" title="Pregúntale Al Gabo" rel="home">Pregúntale Al Gabo</a>
				</span>
				</h3>
				<div id="site-description">Música, Software y Base de Datos</div>
			</div><!-- #branding-->

			<div id="access" class="clear-block" role="navigation">
				<ul id="menu-yii-framework" class="menu"><li id="menu-item-70" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-70"><a title="INICIO" href="http://gabrielduarte77.wordpress.com/">Inicio</a></li>
<li id="menu-item-69" class="menu-item menu-item-type-taxonomy menu-item-object-category current-menu-item menu-item-69"><a title="YII FRAMEWORK" href="./parte2_files/parte2.html">Yii Framework</a></li>
<li id="menu-item-137" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-137"><a href="http://gabrielduarte77.wordpress.com/category/postgresql/">PostgreSQL</a></li>
</ul>
				<div class="social-icons">

											<a href="http://www.youtube.com/gabrielduarte77" class="youtube">You Tube</a>
					
					
											<a href="http://www.twitter.com/gabrielduarte77" class="twitter">Twitter</a>
					
											<a href="http://www.facebook.com/gabrielduarte77" class="facebook">Facebook</a>
					
					
				</div><!-- .social-icons -->

			</div><!-- #access -->

							
			</div><!-- #header-->

			<div id="main">
 			<div id="content-container">
	 			<div id="content">
					<h1 class="archive-title">Archivo de la categoría: <span>Yii Framework</span></h1>
					


		<div class="post-151 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/campos_enmascarados_yii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 18) – CAMPOS ENMASCARADOS EN FORMULARIO">TUTORIAL YII FRAMEWORK (CAPÍTULO 18) – CAMPOS ENMASCARADOS EN&nbsp;FORMULARIO</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/campos_enmascarados_yii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 18) – CAMPOS ENMASCARADOS EN FORMULARIO">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p>Algo muy útil en los formularios es poder enmascarar los campos, esto significa colocar los separadores&nbsp;automáticamente y restringir que caracteres puede ingresar el usuario a medida que se va tecleando, a&nbsp;continuación mostramos un ejemplo de como implementarlo en Yii, no hace falta la inclusión de una&nbsp;extensión.</p>
<p></p><div id="highlighter_3027" class="syntaxhighlighter  "><div class="bar  "><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_3027_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_3027" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="variable">$this</code><code class="plain">-&gt;widget(</code><code class="string">'CMaskedTextField'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="string">'model'</code> <code class="plain">=&gt; </code><code class="variable">$model</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="string">'attribute'</code> <code class="plain">=&gt; </code><code class="string">'telefono_persona'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="string">'mask'</code> <code class="plain">=&gt; </code><code class="string">'(9999)-999-9999'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="string">'htmlOptions'</code> <code class="plain">=&gt; </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'size'</code> <code class="plain">=&gt; 11)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>En ejemplo model es el modelo en cuestión, attribute es el nombre del campo, mask es el tipo de&nbsp;máscara que le quieres colocar y en htmlOptions indicas las características HTML que quieres que tenga tu&nbsp;campo. En la mascara si usamos&nbsp;’9′ indicamos que solo se puede teclear números, ‘a’ es solo letras, y ‘*’ es&nbsp;cualquier carácter alfanumérico</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/campos_enmascarados_yii/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 18) – CAMPOS ENMASCARADOS EN FORMULARIO">3 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-148 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-17-hacer-formulario-para-multiples-modelos/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 17) – HACER FORMULARIO PARA MULTIPLES MODELOS">TUTORIAL YII FRAMEWORK (CAPÍTULO 17) – HACER FORMULARIO PARA MULTIPLES&nbsp;MODELOS</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-17-hacer-formulario-para-multiples-modelos/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 17) – HACER FORMULARIO PARA MULTIPLES MODELOS">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">Una vez realizado el CRUD de cada modelo este nos genera automáticamente un formulario con los&nbsp;datos del modelo, si queremos hacer un formulario que incluya los datos de dos o mas modelos debemos&nbsp;modificar varias lineas de código.</p>
<p style="text-align:justify;">En el ejemplo que explico a continuación tenemos dos modelos, el modelo Personal cuyos datos son&nbsp;id_personal, nombre_personal y id_estado y el modelo Estado con id_estado y nombre_estado, de mas está&nbsp;decir que Personal es alimentado por Estado, lo primero que haremos es modificar la vista _form de Personal.</p>
<p></p><div id="highlighter_538386" class="syntaxhighlighter  "><div class="bar  "><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_538386_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_538386" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;div </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"form"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">&lt;?php </code><code class="variable">$form</code> <code class="plain">= </code><code class="variable">$this</code><code class="plain">-&gt;beginWidget(</code><code class="string">'CActiveForm'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">( </code><code class="string">'id'</code><code class="plain">=&gt;</code><code class="string">'user-form'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="string">'enableAjaxValidation'</code><code class="plain">=&gt;true, ));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$a</code><code class="plain">-&gt;isNewRecord==false) { </code><code class="variable">$b</code><code class="plain">=Estado::model()-&gt;findByPk(</code><code class="variable">$a</code><code class="plain">-&gt;id_estado); }</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;errorSummary(</code><code class="keyword">array</code><code class="plain">(</code><code class="variable">$a</code><code class="plain">,</code><code class="variable">$b</code><code class="plain">)); ?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">&lt;div </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"row"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;labelEx(</code><code class="variable">$a</code><code class="plain">,</code><code class="string">'nombre_personal'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;textField(</code><code class="variable">$a</code><code class="plain">,</code><code class="string">'nombre_personal'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;error(</code><code class="variable">$a</code><code class="plain">,</code><code class="string">'nombre_personal'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">&lt;/div&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">&lt;div </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"row"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;labelEx(</code><code class="variable">$b</code><code class="plain">,</code><code class="string">'nombre_estado'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;textField(</code><code class="variable">$b</code><code class="plain">,</code><code class="string">'nombre_estado'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;error(</code><code class="variable">$b</code><code class="plain">,</code><code class="string">'nombre_estado'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">&lt;/div&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">&lt;div </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"row buttons"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="plain">CHtml::submitButton(</code><code class="variable">$a</code><code class="plain">-&gt;isNewRecord ? </code><code class="string">'Crear'</code> <code class="plain">: </code><code class="string">'Actualizar'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">&lt;/div&gt; &lt;?php </code><code class="variable">$this</code><code class="plain">-&gt;endWidget(); ?&gt; &lt;/div&gt;&lt;/p&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Con ese código incluimos el campo nombre_estado del modelo Estado en el formulario de Personal,&nbsp;también agregamos en el parámetro errorSummary el modelo $b, que en este caso es Estado, con esto nos&nbsp;valida el formulario con las restricciones que hayamos puesto en el rules() de ambos modelos, por otra parte&nbsp;preguntamos si se está creando un nuevo registro o no, en caso de ser una actualización cargamos la&nbsp;información del modelo Estado, de Personal nos la carga automáticamente.</p>
<p>En el caso de las vistas create.php y update.php cambiamos la siguiente linea:</p>
<p></p><div id="highlighter_382258" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_382258_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_382258" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$this</code><code class="plain">-&gt;renderPartial(</code><code class="string">'_form'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'model'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">)); ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>por esta</p>
<p></p><div id="highlighter_298207" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_298207_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_298207" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$this</code><code class="plain">-&gt;renderPartial(</code><code class="string">'_form'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'a'</code><code class="plain">=&gt;</code><code class="variable">$a</code><code class="plain">, </code><code class="string">'b'</code><code class="plain">=&gt;</code><code class="variable">$b</code><code class="plain">)); ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Ahora modificamos la acción create:</p>
<p></p><div id="highlighter_911153" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_911153_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_911153" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">actionCreate()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="variable">$a</code><code class="plain">=</code><code class="keyword">new</code> <code class="plain">Personal;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="variable">$b</code><code class="plain">=</code><code class="keyword">new</code> <code class="plain">Estado;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;performAjaxValidation(</code><code class="keyword">array</code><code class="plain">(</code><code class="variable">$a</code><code class="plain">,</code><code class="variable">$b</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="keyword">if</code><code class="plain">(isset(</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Personal'</code><code class="plain">],</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Estado'</code><code class="plain">]))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="variable">$a</code><code class="plain">-&gt;attributes=</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Personal'</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="variable">$b</code><code class="plain">-&gt;attributes=</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Estado'</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="variable">$sql</code><code class="plain">=</code><code class="string">'select max(id_estado) from estado;'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="variable">$connection</code><code class="plain">=Yii::app()-&gt;db;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="variable">$command</code><code class="plain">=</code><code class="variable">$connection</code><code class="plain">-&gt;createCommand(</code><code class="variable">$sql</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="variable">$row</code><code class="plain">=</code><code class="variable">$command</code><code class="plain">-&gt;queryRow();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="variable">$row</code><code class="plain">[</code><code class="string">"max"</code><code class="plain">]++;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="variable">$b</code><code class="plain">-&gt;id_estado=</code><code class="variable">$row</code><code class="plain">[</code><code class="string">"max"</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="variable">$a</code><code class="plain">-&gt;id_estado=</code><code class="variable">$row</code><code class="plain">[</code><code class="string">"max"</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="keyword">if</code><code class="plain">(</code><code class="variable">$b</code><code class="plain">-&gt;save() &amp;&amp; </code><code class="variable">$a</code><code class="plain">-&gt;save())</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;redirect(</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'view'</code><code class="plain">,</code><code class="string">'id'</code><code class="plain">=&gt;</code><code class="variable">$a</code><code class="plain">-&gt;id_personal));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;render(</code><code class="string">'create'</code><code class="plain">,</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'a'</code><code class="plain">=&gt;</code><code class="variable">$a</code><code class="plain">,</code><code class="string">'b'</code><code class="plain">=&gt;</code><code class="variable">$b</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="plain">&lt;p style=</code><code class="string">"text-align: justify;"</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Lo primero que hacemos es instanciar los modelos Personal y Estado, luego si los datos pasan la&nbsp;validación determinamos el mayor id de estado, se lo asignamos al dato id_estado de cada modelo y&nbsp;guardamos los datos.<br>
Para update hacemos algo parecido:</p>
<p></p><div id="highlighter_253913" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_253913_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_253913" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">actionUpdate(</code><code class="variable">$id</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="variable">$a</code><code class="plain">=</code><code class="keyword">new</code> <code class="plain">Personal;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="variable">$b</code><code class="plain">=</code><code class="keyword">new</code> <code class="plain">Estado;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;performAjaxValidation(</code><code class="keyword">array</code><code class="plain">(</code><code class="variable">$a</code><code class="plain">,</code><code class="variable">$b</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="variable">$a</code><code class="plain">=</code><code class="variable">$this</code><code class="plain">-&gt;loadModel(</code><code class="variable">$id</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="keyword">if</code><code class="plain">(isset(</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Personal'</code><code class="plain">],</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Estado'</code><code class="plain">]))</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="variable">$a</code><code class="plain">-&gt;attributes=</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Personal'</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="variable">$b</code><code class="plain">-&gt;attributes=</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Estado'</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="variable">$b</code><code class="plain">-&gt;id_estado=</code><code class="variable">$a</code><code class="plain">-&gt;id_estado;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="variable">$b</code><code class="plain">-&gt;setIsNewRecord(false);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="keyword">if</code><code class="plain">(</code><code class="variable">$a</code><code class="plain">-&gt;save() &amp;&amp; </code><code class="variable">$b</code><code class="plain">-&gt;update())</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;redirect(</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'view'</code><code class="plain">,</code><code class="string">'id'</code><code class="plain">=&gt;</code><code class="variable">$a</code><code class="plain">-&gt;id_personal));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;render(</code><code class="string">'update'</code><code class="plain">,</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'a'</code><code class="plain">=&gt;</code><code class="variable">$a</code><code class="plain">,</code><code class="string">'b'</code><code class="plain">=&gt;</code><code class="variable">$b</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">&lt;p style=</code><code class="string">"text-align: justify;"</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>De igual forma que con el create validamos los datos, guardamos y direccionamos.&nbsp;En definitiva hemos hecho un formulario en el que guardamos datos de dos modelos distintos, es un&nbsp;ejemplo sencillo pero válido, si tus modelos tienen&nbsp;mas datos lo incluyes en el _form y si quieres agregar más&nbsp;modelos al form se hace de la misma forma.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-17-hacer-formulario-para-multiples-modelos/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 17) – HACER FORMULARIO PARA MULTIPLES MODELOS">9 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-144 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-16-guardar-automaticamente-usuario-y-fecha-de-creacion-y-modificacion/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 16) – GUARDAR AUTOMÁTICAMENTE USUARIO Y FECHA DE CREACIÓN Y MODIFICACIÓN">TUTORIAL YII FRAMEWORK (CAPÍTULO 16) – GUARDAR AUTOMÁTICAMENTE USUARIO Y FECHA DE CREACIÓN Y&nbsp;MODIFICACIÓN</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-16-guardar-automaticamente-usuario-y-fecha-de-creacion-y-modificacion/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 16) – GUARDAR AUTOMÁTICAMENTE USUARIO Y FECHA DE CREACIÓN Y MODIFICACIÓN">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">Nos descargamos la librería de <a title="http://www.yiiframework.com/extension/blameable-behavior/" href="http://www.yiiframework.com/extension/blameable-behavior/">http://www.yiiframework.com/extension/blameable-behavior/</a> y la&nbsp;pegamos en <strong>/component/</strong> , no olvides darle permisos.&nbsp;En el modelo en cuestión copiamos la siguiente función:</p>
<p></p><div id="highlighter_493597" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_493597_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_493597" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">behaviors()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">return</code> <code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="string">'CTimestampBehavior'</code> <code class="plain">=&gt; </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="string">'class'</code> <code class="plain">=&gt; </code><code class="string">'zii.behaviors.CTimestampBehavior'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="string">'createAttribute'</code> <code class="plain">=&gt; </code><code class="string">'created_date'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="string">'updateAttribute'</code> <code class="plain">=&gt; </code><code class="string">'modified_date'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="string">'setUpdateOnCreate'</code> <code class="plain">=&gt; true,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="string">'BlameableBehavior'</code> <code class="plain">=&gt; </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="string">'class'</code> <code class="plain">=&gt; </code><code class="string">'application.components.behaviors.BlameableBehavior'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="string">'createdByColumn'</code> <code class="plain">=&gt; </code><code class="string">'created_by'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="string">'updatedByColumn'</code> <code class="plain">=&gt; </code><code class="string">'modified_by'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">&lt;p style=</code><code class="string">"text-align: justify;"</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Donde created_date, modified_date, created_by y modified_by son los datos de nuestra tabla en&nbsp;donde queremos guardar los datos. Si no tenemos uno de los datos podemos comentar esa linea de código.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-16-guardar-automaticamente-usuario-y-fecha-de-creacion-y-modificacion/#respond" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 16) – GUARDAR AUTOMÁTICAMENTE USUARIO Y FECHA DE CREACIÓN Y MODIFICACIÓN">Dejar un comentario</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-138 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/url_limpias_en_yii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 15) –  NO MOSTRAR INDEX.PHP EN LAS URL">TUTORIAL YII FRAMEWORK (CAPÍTULO 15) –  NO MOSTRAR INDEX.PHP EN LAS&nbsp;URL</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/url_limpias_en_yii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 15) –  NO MOSTRAR INDEX.PHP EN LAS URL">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">Si deseamos que los módulos de nuestro sitio puedan ser accedidos así: <strong>/miproyecto/contact</strong>&nbsp;y no así: &nbsp;<strong>/miproyecto/index.php&amp;r=contact</strong> debemos hacer varios cambios en nuestro proyecto.&nbsp;En primer lugar ejecutamos en la consola de linux: a2enmod rewrite, abrimos&nbsp;<strong>/etc/apache2/SiteAvailables/default</strong> y cambiamos<strong> “Allowoverride=None”</strong> por <strong>“Allowoverride=All”</strong> (se&nbsp;encuentra en dos lineas distintas), luego cambiamos la dirección de nuestro archivo<strong> .htaccess</strong> de&nbsp;<strong>nombre_proyecto/protected/</strong> a <strong>nombre_proyecto/</strong>,<strong> .htaccess</strong> es un archivo oculto, para mostrar los archivos&nbsp;ocultos usamos el atajo control + h.<br>
Abrimos el<strong> .htaccess</strong> y pegamos los siguiente:</p>
<p></p><div id="highlighter_169200" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_169200_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_169200" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">RewriteEngine on</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain"># if a directory or a file exists, use it directly</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">RewriteCond %{REQUEST_FILENAME} !-f</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">RewriteCond %{REQUEST_FILENAME} !-d</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain"># otherwise forward it to index.php</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">RewriteRule . index.php</code></td></tr></tbody></table></div></div></div><p></p>
<p>Finalmente vamos a <strong>/protected/config/main.php</strong> y en el arreglo component agregamos:</p>
<p></p><div id="highlighter_597075" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_597075_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_597075" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="string">'urlManager'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="string">'urlFormat'</code><code class="plain">=&gt;</code><code class="string">'path'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="string">'showScriptName'</code><code class="plain">=&gt;false,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="string">'caseSensitive'</code><code class="plain">=&gt;false,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Con esto hemos limpiado las URLs de nuestro sistema, si nuestros controladores contienen&nbsp;mayúsculas&nbsp;es necesario colocar el atributo ‘caseSensitive’ en true.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/url_limpias_en_yii/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 15) –  NO MOSTRAR INDEX.PHP EN LAS URL">9 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-129 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-14-campo-con-autocompletar/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 14) – CAMPO CON AUTOCOMPLETAR">TUTORIAL YII FRAMEWORK (CAPÍTULO 14) – CAMPO CON&nbsp;AUTOCOMPLETAR</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-14-campo-con-autocompletar/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 14) – CAMPO CON AUTOCOMPLETAR">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">La idea es tener un campo de texto en el que apenas empecemos a ingresar texto se nos liste una serie de resultados que hayan coincidido con ese texto, en la vista donde va a estar el campo debemos colocar el siguiente código:</p>
<p></p><div id="highlighter_854843" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_854843_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_854843" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$model</code><code class="plain">-&gt;estado0!=</code><code class="string">''</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="variable">$value</code><code class="plain">=</code><code class="variable">$model</code><code class="plain">-&gt;estado0-&gt;nombre_estado;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="variable">$value</code><code class="plain">=</code><code class="string">''</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;hiddenField(</code><code class="variable">$model</code><code class="plain">, </code><code class="string">'estado'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;widget(</code><code class="string">'zii.widgets.jui.CJuiAutoComplete'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="string">'name'</code><code class="plain">=&gt;</code><code class="string">'estado'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="string">'model'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="string">'value'</code><code class="plain">=&gt;</code><code class="variable">$value</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="string">'sourceUrl'</code><code class="plain">=&gt;</code><code class="variable">$this</code><code class="plain">-&gt;createUrl(</code><code class="string">'ListarEstados'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="string">'options'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="string">'minLength'</code><code class="plain">=&gt;</code><code class="string">'3'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="string">'showAnim'</code><code class="plain">=&gt;</code><code class="string">'fold'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="string">'select'</code> <code class="plain">=&gt; 'js:</code><code class="keyword">function</code><code class="plain">(event, ui)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">{ jQuery(</code><code class="string">"#Contrato_estado"</code><code class="plain">).val(ui.item[</code><code class="string">"id"</code><code class="plain">]); }',</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="string">'search'</code><code class="plain">=&gt; 'js:</code><code class="keyword">function</code><code class="plain">(event, ui)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">{ jQuery(</code><code class="string">"#Contrato_estado"</code><code class="plain">).val(0); }'</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="plain">));</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">En el código anterior validamos que el campo no esté vacío en la base de datos, de estar vacío es que&nbsp;se está creando un nuevo registro o no se seleccionó ningún estado, luego creamos el campo de auto&nbsp;completar colocandole el nombre, el nombre del modelo, el valor por defecto, cantidad mínima para realizar&nbsp;la búsqueda y la función que guarda el id del campo seleccionado.</p>
<p style="text-align:justify;">
Copiamos la función ListarEstados en nuestro controlador:</p>
<p></p><div id="highlighter_337861" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_337861_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_337861" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">actionListarEstados(</code><code class="variable">$term</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="variable">$criteria</code> <code class="plain">= </code><code class="keyword">new</code> <code class="plain">CDbCriteria;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;condition = </code><code class="string">"LOWER(nombre_estado) like LOWER(:term)"</code><code class="plain">;&lt;/p&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;params = </code><code class="keyword">array</code><code class="plain">(</code><code class="string">':term'</code><code class="plain">=&gt; </code><code class="string">'%'</code><code class="plain">.</code><code class="variable">$_GET</code><code class="plain">[</code><code class="string">'term'</code><code class="plain">].</code><code class="string">'%'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;limit = 30;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="variable">$data</code> <code class="plain">= Estado::model()-&gt;findAll(</code><code class="variable">$criteria</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="variable">$arr</code> <code class="plain">= </code><code class="keyword">array</code><code class="plain">();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="keyword">foreach</code> <code class="plain">(</code><code class="variable">$data</code> <code class="keyword">as</code> <code class="variable">$item</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="variable">$arr</code><code class="plain">[] = </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="string">'id'</code> <code class="plain">=&gt; </code><code class="variable">$item</code><code class="plain">-&gt;id,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="string">'value'</code> <code class="plain">=&gt; </code><code class="variable">$item</code><code class="plain">-&gt;nombre_estado,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="string">'label'</code> <code class="plain">=&gt; </code><code class="variable">$item</code><code class="plain">-&gt;nombre_estado,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="functions">echo</code> <code class="plain">CJSON::encode(</code><code class="variable">$arr</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">En la función de arriba definimos la condición que va a tener nuestro query, en nuestro caso&nbsp;buscaremos por nombre_estado indiferentemente minúsculas y mayúsculas utilizando un like ‘% %’, la&nbsp;máxima cantidad de resultados será de 30, los datos provienen del modelo Estado, el campo a guardar es el id&nbsp;y el que mostraremos es el nombre del estado.</p>
<p style="text-align:justify;">
Hay que darle permisos a los usuarios para utilizar la acción ListarEstados.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-14-campo-con-autocompletar/#respond" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 14) – CAMPO CON AUTOCOMPLETAR">Dejar un comentario</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-120 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/combosdependientesenyii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 13) – COMBOS DEPENDIENTES">TUTORIAL YII FRAMEWORK (CAPÍTULO 13) – COMBOS&nbsp;DEPENDIENTES</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/combosdependientesenyii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 13) – COMBOS DEPENDIENTES">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">La idea es la siguiente: Queremos dos combos, Tipo Organismo y Organismo, la idea es que al momento de escoger un tipo&nbsp;de organismo se despliegue en el segundo combo los distintos organismos que pertenecen a ese tipo para ello&nbsp;utilizamos el siguiente código en el _form:</p>
<p></p><div id="highlighter_660503" class="syntaxhighlighter  "><div class="bar  "><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_660503_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_660503" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="comments">// Tipo de organismos</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;div </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"row"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;labelEx(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_tipo_org'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// Nombre de la etiqueta a mostrar ej: Tipo Organización</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$departamento</code> <code class="plain">= </code><code class="keyword">new</code> <code class="plain">CDbCriteria;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// Preparamos los parámetros de búsqueda</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$departamento</code><code class="plain">-&gt;order = </code><code class="string">'descripcion ASC'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// ordenamos alfabéticamente</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;dropDownList(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_tipo_org'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// id_tipo_org es el nombre del campo en el modelo</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">CHtml::listData(TipoOrgG::model()-&gt;findAll(</code><code class="variable">$departamento</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// TipoOrgG es el modelo en el que se buscaran los datos</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'id_tipo_org'</code><code class="plain">,</code><code class="string">'descripcion'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// id_tipo_org es el dato que se quiere guardar y</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// descripción lo que se quiere mostrar</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'ajax'</code> <code class="plain">=&gt; </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'type'</code> <code class="plain">=&gt; </code><code class="string">'POST'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'url'</code> <code class="plain">=&gt; CController::createUrl(</code><code class="string">'Correspondencia/cargarorganismos'</code><code class="plain">), </code><code class="comments">//</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">la acción que va a cargar el segundo div</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'update'</code> <code class="plain">=&gt; </code><code class="string">'#Correspondencia_id_org_g'</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// el div que se va a actualizar</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code><code class="string">'prompt'</code> <code class="plain">=&gt; </code><code class="string">'Seleccione un Tipo'</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// Valor por defecto</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;error(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_tipo_org'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;/div&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// Segundo Combo, organismos</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;div </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"row"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;labelEx(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_org_g'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$model</code><code class="plain">-&gt;isNewRecord==1)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">//Si se está creando un registro nuevo</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;dropDownList(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_org_g'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'0'</code> <code class="plain">=&gt; </code><code class="string">'Seleccione un Organismo'</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// se muestra solo Seleccione un Organismo</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$tipo</code><code class="plain">=</code><code class="variable">$model</code><code class="plain">-&gt;id_tipo_org;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// Si se está modificando un registro</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$sql</code><code class="plain">=</code><code class="string">"select count(id_org_g) from organismos_g where id_tipo_org='$tipo';"</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">//</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$connection</code><code class="plain">=Yii::app()-&gt;db;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">//</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$command</code><code class="plain">=</code><code class="variable">$connection</code><code class="plain">-&gt;createCommand(</code><code class="variable">$sql</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>46</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">//</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>47</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$row</code><code class="plain">=</code><code class="variable">$command</code><code class="plain">-&gt;queryRow();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>48</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">//</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>49</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$bandera</code><code class="plain">=</code><code class="variable">$row</code><code class="plain">[</code><code class="string">'count'</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>50</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">//</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>51</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$bandera</code><code class="plain">==0) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>52</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">//</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>53</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;dropDownList(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_org_g'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>54</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'0'</code> <code class="plain">=&gt; </code><code class="string">'Seleccione un Organismo'</code><code class="plain">)); }</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>55</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// Si el tipo de organismo no tiene ningún</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>56</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>57</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">// organismo solo muestra Seleccione un Organismo</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>58</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;dropDownList(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_org_g'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>59</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">CHtml::listData(OrganismosG::model()-&gt;findAllBySql(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>60</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="comments">//Aquí van los datos de la búsqueda del segundo combo</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>61</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">"select * from organismos_g where id_tipo_org</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>62</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">=:keyword order by id_org_g=:clave2 asc",</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>63</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">':keyword'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">-&gt;id_tipo_org,</code><code class="string">':clave2'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">-&gt;id_org_g)),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>64</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'id_org_g'</code><code class="plain">,</code><code class="string">'descripcion'</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>65</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>66</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>67</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">?&gt;&lt;/div&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>En el controlador colocamos la siguiente función:</p>
<p></p><div id="highlighter_763493" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_763493_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_763493" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">actionCargarorganismos()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="variable">$data</code><code class="plain">=OrganismosG::model()-&gt;findAllBySql(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">"select * from organismos_g where id_tipo_org</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">=:keyword </code><code class="keyword">or</code> <code class="plain">id_org_g=0 order by id_org_g=0 desc, descripcion asc",</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="comments">// Aquí buscamos los diferentes organismos que pertenecen al tipo elegido</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">':keyword'</code><code class="plain">=&gt;</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Correspondencia'</code><code class="plain">][</code><code class="string">'id_tipo_org'</code><code class="plain">]));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="variable">$data</code><code class="plain">=CHtml::listData(</code><code class="variable">$data</code><code class="plain">,</code><code class="string">'id_org_g'</code><code class="plain">,</code><code class="string">'descripcion'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="keyword">foreach</code><code class="plain">(</code><code class="variable">$data</code> <code class="keyword">as</code> <code class="variable">$value</code><code class="plain">=&gt;</code><code class="variable">$name</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="functions">echo</code> <code class="plain">CHtml::tag(</code><code class="string">'option'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'value'</code><code class="plain">=&gt;</code><code class="variable">$value</code><code class="plain">),CHtml::encode(</code><code class="variable">$name</code><code class="plain">),true);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>Hay que darle permisos a la acción cargarorganismos.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/combosdependientesenyii/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 13) – COMBOS DEPENDIENTES">11 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-112 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/reportesengridyii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 12) – REPORTES A PARTIR DE UNA BÚSQUEDA EN EL GRID">TUTORIAL YII FRAMEWORK (CAPÍTULO 12) – REPORTES A PARTIR DE UNA BÚSQUEDA EN EL&nbsp;GRID</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/reportesengridyii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 12) – REPORTES A PARTIR DE UNA BÚSQUEDA EN EL GRID">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p>He visto en el foro que hay muchas personas preguntando como exportar en PDF a partir de una&nbsp;búsqueda en la vista Admin, aquí les traigo una solución a ese problema.&nbsp;En el&nbsp;método&nbsp;<strong>search()</strong> del modelo en cuestión agregamos al final (antes del retorno) las siguientes&nbsp;lineas de código:</p>
<p></p><div id="highlighter_176513" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_176513_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_176513" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="variable">$_SESSION</code><code class="plain">[</code><code class="string">'datos_filtrados'</code><code class="plain">] = </code><code class="keyword">new</code> <code class="plain">CActiveDataProvider(</code><code class="variable">$this</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="string">'criteria'</code><code class="plain">=&gt;</code><code class="variable">$criteria</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="string">'sort'</code><code class="plain">=&gt;</code><code class="variable">$sort</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="string">'pagination'</code><code class="plain">=&gt;false,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">));</code></td></tr></tbody></table></div></div></div><p></p>
<p>Donde <strong>$criteria</strong> son los datos de filtrado y <strong>$sort</strong> el arreglo de ordenación, eso nos guardará en una&nbsp;variable de sesión la ultima búsqueda realizada, si no hemos realizado ninguna búsqueda estaremos&nbsp;guardando todos los resultados del listado, es importante colocar en false la paginación para que pueda&nbsp;traernos todos los resultados.&nbsp;En la vista admin agregar el botón de exportar con<strong> array(‘label’⇒’Exportar a PDF’, ‘url’⇒array(‘pdf’))</strong>,&nbsp;en la configuración del menú.&nbsp;En el controlador agregamos la siguiente función:</p>
<p></p><div id="highlighter_298711" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_298711_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_298711" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">actionPdf()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;render(</code><code class="string">'pdf'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>Agrega la action pdf en el accessRules del controlador, para que los usuarios del sistema puedan tener&nbsp;permisos de utilizarla.&nbsp;La librería que uso y recomiendo para exportar pdf es MPDF, la pueden descargar de su pagina&nbsp;oficial, una vez descargada la copian en extensions.&nbsp;Un ejemplo para la vista pdf es el siguiente:</p>
<p></p><div id="highlighter_357899" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_357899_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_357899" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;? </code><code class="variable">$pdf</code> <code class="plain">= Yii::createComponent(</code><code class="string">'application.extensions.MPDF52.mpdf'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="variable">$dataProvider</code> <code class="plain">= </code><code class="variable">$_SESSION</code><code class="plain">[</code><code class="string">'datos_filtrados'</code><code class="plain">]-&gt;getData();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="variable">$contador</code><code class="plain">=</code><code class="functions">count</code><code class="plain">(</code><code class="variable">$dataProvider</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="variable">$html</code><code class="plain">.='</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">&lt;table align=</code><code class="string">"center"</code><code class="plain">&gt;&lt;tr&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">&lt;td align=</code><code class="string">"center"</code><code class="plain">&gt;&lt;b&gt;LISTADO DE CONTRATOS&lt;/b&gt;&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">&lt;/tr&gt;&lt;/table&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">Total Resultados: </code><code class="string">'.$contador.'</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">&lt;table </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"detail-view2"</code> <code class="plain">repeat_header=</code><code class="string">"1"</code> <code class="plain">cellpadding=</code><code class="string">"1"</code> <code class="plain">cellspacing=</code><code class="string">"1"</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">width=</code><code class="string">"100%"</code> <code class="plain">border=</code><code class="string">"0"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code> <code class="plain">width=</code><code class="string">"7%"</code><code class="plain">&gt;&amp;nbsp;N° Control&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code> <code class="plain">width=</code><code class="string">"7%"</code><code class="plain">&gt;&amp;nbsp;N° Contrato&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code> <code class="plain">width=</code><code class="string">"19%"</code><code class="plain">&gt;&amp;nbsp;Empresa&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code> <code class="plain">width=</code><code class="string">"10%"</code><code class="plain">&gt;&amp;nbsp;Estado&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code> <code class="plain">width=</code><code class="string">"9%"</code><code class="plain">&gt;&amp;nbsp;Monto Contratado&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code> <code class="plain">width=</code><code class="string">"25%"</code><code class="plain">&gt;&amp;nbsp;Objeto Contrato&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code> <code class="plain">width=</code><code class="string">"14%"</code><code class="plain">&gt;&amp;nbsp;Personal Actuante&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code> <code class="plain">width=</code><code class="string">"9%"</code><code class="plain">&gt;&amp;nbsp;Tipo Informe&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">&lt;/tr&gt;';</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="variable">$i</code><code class="plain">=0;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="variable">$val</code><code class="plain">=</code><code class="functions">count</code><code class="plain">(</code><code class="variable">$dataProvider</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="keyword">while</code><code class="plain">(</code><code class="variable">$i</code><code class="plain">&lt;</code><code class="variable">$val</code><code class="plain">){</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="variable">$html</code><code class="plain">.='</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code> <code class="plain">width=</code><code class="string">"7%"</code><code class="plain">&gt;&amp;nbsp;'.</code><code class="variable">$dataProvider</code><code class="plain">[</code><code class="variable">$i</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="plain">[</code><code class="string">"num_control"</code><code class="plain">].'&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code> <code class="plain">width=</code><code class="string">"7%"</code><code class="plain">&gt;&amp;nbsp;'.</code><code class="variable">$dataProvider</code><code class="plain">[</code><code class="variable">$i</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="plain">[</code><code class="string">"num_contrato"</code><code class="plain">].'&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code> <code class="plain">width=</code><code class="string">"19%"</code><code class="plain">&gt;&amp;nbsp;</code><code class="string">'.$dataProvider[$i]["empresa"].'</code><code class="plain">&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code> <code class="plain">width=</code><code class="string">"10%"</code><code class="plain">&gt;&amp;nbsp;'.</code><code class="variable">$dataProvider</code><code class="plain">[</code><code class="variable">$i</code><code class="plain">][</code><code class="string">"estado0"</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="plain">[</code><code class="string">"nombre_estado"</code><code class="plain">].'&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code> <code class="plain">width=</code><code class="string">"9%"</code><code class="plain">&gt;&amp;nbsp;'.</code><code class="variable">$dataProvider</code><code class="plain">[</code><code class="variable">$i</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="plain">[</code><code class="string">"monto_contratado"</code><code class="plain">].'&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code> <code class="plain">width=</code><code class="string">"25%"</code><code class="plain">&gt;&amp;nbsp;'.</code><code class="variable">$dataProvider</code><code class="plain">[</code><code class="variable">$i</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="plain">[</code><code class="string">"objeto_contrato"</code><code class="plain">].'&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code> <code class="plain">width=</code><code class="string">"14%"</code><code class="plain">&gt;&amp;nbsp;'.</code><code class="variable">$dataProvider</code><code class="plain">[</code><code class="variable">$i</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="plain">[</code><code class="string">"personal_actuante"</code><code class="plain">].'&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="plain">&lt;td </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code> <code class="plain">width=</code><code class="string">"9%"</code><code class="plain">&gt;&amp;nbsp;'.</code><code class="variable">$dataProvider</code><code class="plain">[</code><code class="variable">$i</code><code class="plain">][</code><code class="string">"informe0"</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="plain">[</code><code class="string">"nombre_tipo_informe"</code><code class="plain">].'&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="plain">';</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="variable">$html</code><code class="plain">.=</code><code class="string">'&lt;/tr&gt;'</code><code class="plain">; </code><code class="variable">$i</code><code class="plain">++;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="variable">$html</code><code class="plain">.=</code><code class="string">'&lt;/table&gt;'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>46</code></td><td class="content"><code class="variable">$mpdf</code><code class="plain">=</code><code class="keyword">new</code> <code class="plain">mPDF(</code><code class="string">'win-1252'</code><code class="plain">,</code><code class="string">'LETTER-L'</code><code class="plain">,</code><code class="string">''</code><code class="plain">,</code><code class="string">''</code><code class="plain">,9,9,24,10,5,5);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>47</code></td><td class="content"><code class="variable">$mpdf</code><code class="plain">-&gt;WriteHTML(</code><code class="variable">$html</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>48</code></td><td class="content"><code class="variable">$mpdf</code><code class="plain">-&gt;Output(</code><code class="string">'Reporte_Contratos.pdf'</code><code class="plain">,</code><code class="string">'D'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>49</code></td><td class="content"><code class="functions">exit</code><code class="plain">; ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Como vemos al principio del ejemplo tomamos los datos filtrado mediante la variable de sesión y&nbsp;disponemos de ellos como queramos en el pdf.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/reportesengridyii/#respond" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 12) – REPORTES A PARTIR DE UNA BÚSQUEDA EN EL GRID">Dejar un comentario</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-105 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-11-exportar-del-cgridview-a-pdf/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 11) – EXPORTAR DEL CGRIDVIEW A PDF">TUTORIAL YII FRAMEWORK (CAPÍTULO 11) – EXPORTAR DEL CGRIDVIEW A&nbsp;PDF</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-11-exportar-del-cgridview-a-pdf/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 11) – EXPORTAR DEL CGRIDVIEW A PDF">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">Si queremos exportar registros del Cgridview a pdf a continuación te explicamos como.&nbsp;Lo primero que hacemos es bajarnos la ultima versión de MPDF aqui&nbsp;<a href="https://rapidshare.com/files/4038705402/MPDF54.zip" title="https://rapidshare.com/files/4038705402/MPDF54.zip" target="_blank">https://rapidshare.com/files/4038705402/MPDF54.zip</a>&nbsp;y la colocamos en <strong>protected/extensions</strong>, copiamos en el controlador de la tabla&nbsp;a la que se hará el reporte la siguiente función:</p>
<p></p><div id="highlighter_507360" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_507360_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_507360" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">actionPdf(</code><code class="variable">$id</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;render(</code><code class="string">'pdf'</code><code class="plain">,</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="string">'model'</code><code class="plain">=&gt;</code><code class="variable">$this</code><code class="plain">-&gt;loadModel(</code><code class="variable">$id</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>Colocamos pdf en la funcion accessRules() del mismo controlador para que los usuarios puedan&nbsp;acceder a la acción , en la vista admin sustituir el arreglo de los botones por el siguiente:</p>
<p></p><div id="highlighter_865582" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_865582_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_865582" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="string">'class'</code><code class="plain">=&gt;</code><code class="string">'CButtonColumn'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="string">'template'</code> <code class="plain">=&gt; </code><code class="string">'{view} {update} {delete} {pdf}'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="string">'buttons'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="string">'pdf'</code> <code class="plain">=&gt; </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Generar PDF'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="string">'url'</code><code class="plain">=&gt;"CHtml::normalizeUrl(</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'pdf'</code><code class="plain">, </code><code class="string">'id'</code><code class="plain">=&gt;\</code><code class="variable">$data</code><code class="plain">-&gt;id</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">))",</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="string">'imageUrl'</code><code class="plain">=&gt;Yii::app()-&gt;request-&gt;baseUrl.</code><code class="string">'/images/pdf_icon.png'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="string">'options'</code> <code class="plain">=&gt; </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'class'</code><code class="plain">=&gt;</code><code class="string">'pdf'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p>En la vista view agregamos la vista de nuestro pdf en el menu:</p>
<p></p><div id="highlighter_116863" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_116863_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_116863" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Crear PDF'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'pdf'</code><code class="plain">,</code><code class="string">'id'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">-&gt;id)),</code></td></tr></tbody></table></div></div></div><p></p>
<p>en este caso la clave primaria del registro la puse como id en la base de datos, si en tu caso es&nbsp;“id_producto” o algo por el estilo debes cambiarlo cuando se pasa el dato a la vista.</p>
<p>Y por ultimo tenemos el archivo pdf.php que estará en las vistas:</p>
<p></p><div id="highlighter_56207" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_56207_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_56207" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;?php</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="variable">$pdf</code> <code class="plain">= Yii::createComponent(</code><code class="string">'application.extensions.MPDF52.mpdf'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="variable">$html</code><code class="plain">='</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">&lt;table id=</code><code class="string">"yw0"</code> <code class="keyword">class</code><code class="plain">=</code><code class="string">"detail-view2"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"principal"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">&lt;td colspan=</code><code class="string">"2"</code> <code class="plain">align=</code><code class="string">"center"</code><code class="plain">&gt;&lt;b&gt;DATOS DEL CONTRATO&lt;/b&gt;&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">&lt;tr&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">&lt;td&gt; &lt;b&gt;N° Control&lt;/b&gt; &lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">&lt;td&gt; </code><code class="string">'.$model-&gt;num_control.'</code><code class="plain">&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">&lt;/tr&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"even"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">&lt;td&gt; &lt;b&gt;Trimestre Ejecucion&lt;/b&gt; &lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">&lt;td&gt; </code><code class="string">'.$model-&gt;trimestre_ejecucion.'</code><code class="plain">&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">&lt;/tr&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">&lt;td&gt; &lt;b&gt;Nombre Estado&lt;/b&gt; &lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">&lt;td&gt; </code><code class="string">'.$model-&gt;estado0["nombre_estado"].'</code><code class="plain">&lt;/td&gt;&lt;/tr&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"even"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">&lt;td&gt; &lt;b&gt;Empresa&lt;/b&gt; &lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="plain">&lt;td&gt; </code><code class="string">'.$model-&gt;empresa.'</code><code class="plain">&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="plain">&lt;/tr&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="plain">&lt;td&gt; &lt;b&gt;Personal Actuante&lt;/b&gt; &lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="plain">&lt;td&gt; </code><code class="string">'.$model-&gt;personal_actuante.'</code><code class="plain">&lt;/td&gt;&lt;/tr&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"even"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="plain">&lt;td&gt; &lt;b&gt;Nombre Tipo Informe&lt;/b&gt; &lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="plain">&lt;td&gt; </code><code class="string">'.$model-&gt;informe0["nombre_tipo_informe"].'</code><code class="plain">&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="plain">&lt;/tr&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"even"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="plain">&lt;td&gt; &lt;b&gt;N° Contrato&lt;/b&gt; &lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="plain">&lt;td&gt; </code><code class="string">'.$model-&gt;num_contrato.'</code><code class="plain">&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="plain">&lt;/tr&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="plain">&lt;tr </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"odd"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="plain">&lt;td&gt; &lt;b&gt;Monto Contratado&lt;/b&gt; &lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="plain">&lt;td&gt; </code><code class="string">'.$model-&gt;monto_contratado.'</code><code class="plain">&lt;/td&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="plain">&lt;/tr&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="plain">&lt;/table&gt;';</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="comments">//$header='&lt;img src="'.Yii::app()-&gt;request-&gt;baseUrl.'/images/banner.png"/&gt;';</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="variable">$mpdf</code><code class="plain">=</code><code class="keyword">new</code> <code class="plain">mPDF(</code><code class="string">'win-1252'</code><code class="plain">,</code><code class="string">'LETTER'</code><code class="plain">,</code><code class="string">''</code><code class="plain">,</code><code class="string">''</code><code class="plain">,15,15,25,12,5,7);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="variable">$mpdf</code><code class="plain">-&gt;SetHTMLHeader(</code><code class="variable">$header</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="variable">$mpdf</code><code class="plain">-&gt;SetFooter(</code><code class="string">' {DATE j/m/Y}|Página {PAGENO}/{nbpg}|Sistema de Contratos'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content"><code class="variable">$mpdf</code><code class="plain">-&gt;WriteHTML(</code><code class="variable">$html</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="variable">$mpdf</code><code class="plain">-&gt;Output(</code><code class="string">'Ficha-Contrato.pdf'</code><code class="plain">,</code><code class="string">'D'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>46</code></td><td class="content"><code class="functions">exit</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>47</code></td><td class="content"><code class="plain">?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-11-exportar-del-cgridview-a-pdf/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 11) – EXPORTAR DEL CGRIDVIEW A PDF">9 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-101 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/buscadaporfechasenyii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 10) – BÚSQUEDAS POR FECHAS CON SYDATECOLUMN">TUTORIAL YII FRAMEWORK (CAPÍTULO 10) – BÚSQUEDAS POR FECHAS CON&nbsp;SYDATECOLUMN</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/buscadaporfechasenyii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 10) – BÚSQUEDAS POR FECHAS CON SYDATECOLUMN">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p>- Bajamos la extensión de <a title="http://www.yiiframework.com/extension/sydatecolumn/" href="http://www.yiiframework.com/extension/sydatecolumn/">http://www.yiiframework.com/extension/sydatecolumn/</a> y la copiamos la clase&nbsp;en <strong>/protected/components/</strong><br>
- En nuestro CGridView colocamos la columna de la fecha así:</p>
<p></p><div id="highlighter_174103" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_174103_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_174103" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="string">'header'</code><code class="plain">=&gt;</code><code class="string">'Fecha Vigencia'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="string">'name'</code><code class="plain">=&gt;</code><code class="string">'fecha_vigencia'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="string">'value'</code> <code class="plain">=&gt; </code><code class="string">'cambio_fecha($data-&gt;fecha_vigencia)'</code> <code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="string">'htmlOptions'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'width'</code><code class="plain">=&gt;</code><code class="string">'180px'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="string">'class'</code><code class="plain">=&gt;</code><code class="string">'SYDateColumn'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p>- Agregar en el modelo la variable donde se guardará el rango:</p>
<p></p><div id="highlighter_629080" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_629080_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_629080" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="variable">$fecha_vigencia_range</code> <code class="plain">= </code><code class="keyword">array</code><code class="plain">();</code></td></tr></tbody></table></div></div></div><p></p>
<p>- Agregar a la función rules nuestro campo fecha_vigencia_range para que el formulario mantenga la fecha&nbsp;dada luego de la búsqueda</p>
<p></p><div id="highlighter_131580" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_131580_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_131580" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">function</code> <code class="plain">rules() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="keyword">return</code> <code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="comments">//...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'.....,fecha_vigencia_range'</code><code class="plain">, </code><code class="string">'safe'</code><code class="plain">, </code><code class="string">'on'</code><code class="plain">=&gt;</code><code class="string">'search'</code><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p>- En la función search del modelo agregamos lo siguiente:</p>
<p></p><div id="highlighter_985591" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_985591_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_985591" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="variable">$from</code> <code class="plain">= </code><code class="variable">$to</code> <code class="plain">= </code><code class="string">''</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="functions">count</code><code class="plain">(</code><code class="variable">$this</code><code class="plain">-&gt;fecha_vigencia_range)&gt;=1) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(isset(</code><code class="variable">$this</code><code class="plain">-&gt;fecha_vigencia_range[</code><code class="string">'from'</code><code class="plain">])) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="variable">$from</code> <code class="plain">= </code><code class="variable">$this</code><code class="plain">-&gt;fecha_vigencia_range[</code><code class="string">'from'</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(isset(</code><code class="variable">$this</code><code class="plain">-&gt;fecha_vigencia_range[</code><code class="string">'to'</code><code class="plain">])) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="variable">$to</code><code class="plain">= </code><code class="variable">$this</code><code class="plain">-&gt;fecha_vigencia_range[</code><code class="string">'to'</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$from</code><code class="plain">!=</code><code class="string">''</code> <code class="plain">|| </code><code class="variable">$to</code> <code class="plain">!=</code><code class="string">''</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$from</code><code class="plain">!=</code><code class="string">''</code> <code class="plain">&amp;&amp; </code><code class="variable">$to</code><code class="plain">!=</code><code class="string">''</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="variable">$from</code> <code class="plain">= </code><code class="functions">date</code><code class="plain">(</code><code class="string">"d-m-Y"</code><code class="plain">, </code><code class="functions">strtotime</code><code class="plain">(</code><code class="variable">$from</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="variable">$to</code> <code class="plain">= </code><code class="functions">date</code><code class="plain">(</code><code class="string">"d-m-Y"</code><code class="plain">, </code><code class="functions">strtotime</code><code class="plain">(</code><code class="variable">$to</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;compare(</code><code class="string">'fecha_vigencia'</code><code class="plain">,</code><code class="string">"&gt;= $from"</code><code class="plain">,false);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;compare(</code><code class="string">'fecha_vigencia'</code><code class="plain">,</code><code class="string">"&lt;= $to"</code><code class="plain">,false);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$from</code><code class="plain">!=</code><code class="string">''</code><code class="plain">) </code><code class="variable">$creation_time</code> <code class="plain">= </code><code class="variable">$from</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$to</code> <code class="plain">!= </code><code class="string">''</code><code class="plain">) </code><code class="variable">$creation_time</code> <code class="plain">= </code><code class="variable">$to</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="variable">$creation_time</code> <code class="plain">= </code><code class="functions">date</code><code class="plain">(</code><code class="string">"d-m-Y"</code><code class="plain">, </code><code class="functions">strtotime</code><code class="plain">(</code><code class="variable">$creation_time</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;compare(</code><code class="string">'fecha_vigencia'</code><code class="plain">, </code><code class="string">"$creation_time"</code> <code class="plain">,false);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/buscadaporfechasenyii/#respond" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 10) – BÚSQUEDAS POR FECHAS CON SYDATECOLUMN">Dejar un comentario</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-96 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-9-fechas-con-cjuidatepicker/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 9) – FECHAS CON CJUIDATEPICKER">TUTORIAL YII FRAMEWORK (CAPÍTULO 9) – FECHAS CON&nbsp;CJUIDATEPICKER</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-9-fechas-con-cjuidatepicker/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 9) – FECHAS CON CJUIDATEPICKER">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">En el<strong> /protected/views/nombre_del_modelo/_form.php</strong> modifica nuestra fecha por:</p>
<p></p><div id="highlighter_892015" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_892015_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_892015" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;div </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"row"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;labelEx(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'fecha'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;?php</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$model</code><code class="plain">-&gt;fecha!=</code><code class="string">''</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$model</code><code class="plain">-&gt;fecha=</code><code class="functions">date</code><code class="plain">(</code><code class="string">'d-m-Y'</code><code class="plain">,</code><code class="functions">strtotime</code><code class="plain">(</code><code class="variable">$model</code><code class="plain">-&gt;fecha));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$this</code><code class="plain">-&gt;widget(</code><code class="string">'zii.widgets.jui.CJuiDatePicker'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'model'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'attribute'</code><code class="plain">=&gt;</code><code class="string">'fecha'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'value'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">-&gt;fecha,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'language'</code> <code class="plain">=&gt; </code><code class="string">'es'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'htmlOptions'</code> <code class="plain">=&gt; </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'readonly'</code><code class="plain">=&gt;</code><code class="string">"readonly"</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'options'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'autoSize'</code><code class="plain">=&gt;true,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'defaultDate'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">-&gt;fecha,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'dateFormat'</code><code class="plain">=&gt;</code><code class="string">'dd-mm-yy'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'buttonImage'</code><code class="plain">=&gt;Yii::app()-&gt;baseUrl.</code><code class="string">'/images/calendar.png'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'buttonImageOnly'</code><code class="plain">=&gt;true,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'buttonText'</code><code class="plain">=&gt;</code><code class="string">'Fecha'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'selectOtherMonths'</code><code class="plain">=&gt;true,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'showAnim'</code><code class="plain">=&gt;</code><code class="string">'slide'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'showButtonPanel'</code><code class="plain">=&gt;true,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'showOn'</code><code class="plain">=&gt;</code><code class="string">'button'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'showOtherMonths'</code><code class="plain">=&gt;true,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'changeMonth'</code> <code class="plain">=&gt; </code><code class="string">'true'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'changeYear'</code> <code class="plain">=&gt; </code><code class="string">'true'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">)); ?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;error(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'fecha'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;/div&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Antes de guardar debemos verificar que la fecha no venga vacía, eso lo hacemos en la función actionCreate, recuerda que /images/calendar.png es una imagen que hayas decido colocar allí. Al darle clic en la imagen se mostraría lo siguiente:</p>
<p><a href="http://gabrielduarte77.files.wordpress.com/2012/01/fecha.jpeg"><img class="aligncenter size-full wp-image-97" title="FECHA" src="./parte2_files/fecha.jpeg" alt=""></a></p>
<p></p><div id="highlighter_103428" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_103428_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_103428" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">if</code><code class="plain">(</code><code class="variable">$model</code><code class="plain">-&gt;fecha==</code><code class="string">''</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$model</code><code class="plain">-&gt;fecha=NULL;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>Si queremos formatear la fecha en la consulta a ‘d-m-Y’ debemos modificar en el <strong>/protected/views/nombre_del_modelo/view.php</strong>:</p>
<p></p><div id="highlighter_140928" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_140928_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_140928" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">if</code> <code class="plain">(</code><code class="variable">$model</code><code class="plain">-&gt;fecha!=</code><code class="string">''</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="variable">$fecha</code><code class="plain">=</code><code class="functions">date</code><code class="plain">(</code><code class="string">'d-m-Y'</code><code class="plain">,</code><code class="functions">strtotime</code><code class="plain">(</code><code class="variable">$model</code><code class="plain">-&gt;fecha));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="variable">$fecha</code><code class="plain">=</code><code class="string">''</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>Y en el ‘attributes’⇒array modificar ‘fecha’ con:</p>
<p></p><div id="highlighter_479180" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_479180_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_479180" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'name'</code><code class="plain">=&gt;</code><code class="string">'fecha'</code><code class="plain">, </code><code class="string">'value'</code><code class="plain">=&gt;</code><code class="variable">$fecha</code><code class="plain">,),</code></td></tr></tbody></table></div></div></div><p></p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="./parte2_files/parte2.html" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-9-fechas-con-cjuidatepicker/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 9) – FECHAS CON CJUIDATEPICKER">5 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
	<div class="post-navigation">
		<div class="nav-previous"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/">← Publicaciones antiguas</a></div>
		<div class="nav-next"></div>
	</div><!-- .post-navigation -->
				</div><!-- #content -->
			</div><!-- #content-container -->


	<div id="sidebar" class="widget-area" role="complementary">
				<ul class="xoxo">

		<li id="text-2" class="widget widget_text">			<div class="textwidget">
		<div>

				Blog de música, base de datos y software en general.
		</div>
		<div>
			He compilado una serie de capítulos del framework Yii para PHP.</div>
		<div>
			Caracas, Venezuela</div>
		<div>
			gabrielduarte77@gmail.com</div>
	
</div>
		</li><li id="search-3" class="widget widget_search">
<form method="get" id="searchform" action="http://gabrielduarte77.wordpress.com/">
	<div id="searchfield">
		<label for="s" class="screen-reader-text">Buscar por:</label>
		<input type="text" name="s" id="s" class="searchtext">
		<input type="submit" value="Go" class="searchbutton">
	</div>
</form></li><li id="twitter-2" class="widget widget_twitter"><h3 class="widget-title"><span><a href="http://twitter.com/gabrielduarte77">Mis Tweets</a></span></h3><ul class="tweets">
			<li>
				Después de miles de años @<a href="http://twitter.com/Yohiglener">Yohiglener</a> se unió a twitter, bienvenida! 				<a href="http://twitter.com/gabrielduarte77/statuses/275210395956948992" class="timesince">1&nbsp;week&nbsp;ago</a>
			</li>

			
			<li>
				O qué bien lee jajaja "@<a href="http://twitter.com/manugaona">manugaona</a>: Qué bien habla Rafael Correa: <a href="http://youtu.be/6rhZwzPD_SY"> youtu.be/6rhZwzPD_SY</a>" 				<a href="http://twitter.com/gabrielduarte77/statuses/270477691449389056" class="timesince">3&nbsp;weeks&nbsp;ago</a>
			</li>

			
			<li>
				Házle mención spin "@<a href="http://twitter.com/carlosgrillet_">carlosgrillet_</a>: Gente que rompe códigos y se come la luz vale" 				<a href="http://twitter.com/gabrielduarte77/statuses/269601744181399553" class="timesince">3&nbsp;weeks&nbsp;ago</a>
			</li>

			</ul><iframe allowtransparency="true" frameborder="0" scrolling="no" src="./parte2_files/follow_button.1354761327.html" class="twitter-follow-button" style="width: 163px; height: 20px;" title="Twitter Follow Button" data-twttr-rendered="true"></iframe></li><li id="categories-2" class="widget widget_categories"><h3 class="widget-title"><span>Categorías</span></h3>		<ul>
			<li class="cat-item cat-item-15989"><a href="http://gabrielduarte77.wordpress.com/category/postgresql/" title="Ver todas las entradas archivadas en PostgreSQL">PostgreSQL</a> (3)
</li>
	<li class="cat-item cat-item-15920252 current-cat"><a href="./parte2_files/parte2.html" title="Ver todas las entradas archivadas en Yii Framework">Yii Framework</a> (18)
</li>
		</ul>
</li>		<li id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title"><span>Ultimas Publicaciones</span></h3>		<ul>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/06/28/migracion-de-datos-de-oracle-a-postgresql-con-kettle-migracion-de-datos-de-oracle-a-postgresql-con-kettle/" title="Migración de Datos de Oracle a PostgreSQL con Kettle">Migración de Datos de Oracle a PostgreSQL con&nbsp;Kettle</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/03/27/ejemplo-basico-de-pgcrypto/" title="Ejemplo Básico de PgCrypto">Ejemplo Básico de&nbsp;PgCrypto</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/02/10/funcion-months_between-de-oracle-en-postgresql/" title="FUNCIÓN MONTHS_BETWEEN() DE ORACLE EN POSTGRESQL">FUNCIÓN MONTHS_BETWEEN() DE ORACLE EN&nbsp;POSTGRESQL</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/campos_enmascarados_yii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 18) – CAMPOS ENMASCARADOS EN FORMULARIO">TUTORIAL YII FRAMEWORK (CAPÍTULO 18) – CAMPOS ENMASCARADOS EN&nbsp;FORMULARIO</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-17-hacer-formulario-para-multiples-modelos/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 17) – HACER FORMULARIO PARA MULTIPLES MODELOS">TUTORIAL YII FRAMEWORK (CAPÍTULO 17) – HACER FORMULARIO PARA MULTIPLES&nbsp;MODELOS</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-16-guardar-automaticamente-usuario-y-fecha-de-creacion-y-modificacion/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 16) – GUARDAR AUTOMÁTICAMENTE USUARIO Y FECHA DE CREACIÓN Y MODIFICACIÓN">TUTORIAL YII FRAMEWORK (CAPÍTULO 16) – GUARDAR AUTOMÁTICAMENTE USUARIO Y FECHA DE CREACIÓN Y&nbsp;MODIFICACIÓN</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/url_limpias_en_yii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 15) –  NO MOSTRAR INDEX.PHP EN LAS URL">TUTORIAL YII FRAMEWORK (CAPÍTULO 15) –  NO MOSTRAR INDEX.PHP EN LAS&nbsp;URL</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-14-campo-con-autocompletar/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 14) – CAMPO CON AUTOCOMPLETAR">TUTORIAL YII FRAMEWORK (CAPÍTULO 14) – CAMPO CON&nbsp;AUTOCOMPLETAR</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/combosdependientesenyii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 13) – COMBOS DEPENDIENTES">TUTORIAL YII FRAMEWORK (CAPÍTULO 13) – COMBOS&nbsp;DEPENDIENTES</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/reportesengridyii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 12) – REPORTES A PARTIR DE UNA BÚSQUEDA EN EL GRID">TUTORIAL YII FRAMEWORK (CAPÍTULO 12) – REPORTES A PARTIR DE UNA BÚSQUEDA EN EL&nbsp;GRID</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-11-exportar-del-cgridview-a-pdf/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 11) – EXPORTAR DEL CGRIDVIEW A PDF">TUTORIAL YII FRAMEWORK (CAPÍTULO 11) – EXPORTAR DEL CGRIDVIEW A&nbsp;PDF</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/buscadaporfechasenyii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 10) – BÚSQUEDAS POR FECHAS CON SYDATECOLUMN">TUTORIAL YII FRAMEWORK (CAPÍTULO 10) – BÚSQUEDAS POR FECHAS CON&nbsp;SYDATECOLUMN</a>
						</li>
				</ul>
		</li><li id="archives-2" class="widget widget_archive"><h3 class="widget-title"><span>Archivos</span></h3>		<ul>
			<li><a href="http://gabrielduarte77.wordpress.com/2012/06/" title="junio 2012">junio 2012</a>&nbsp;(1)</li>
	<li><a href="http://gabrielduarte77.wordpress.com/2012/03/" title="marzo 2012">marzo 2012</a>&nbsp;(1)</li>
	<li><a href="http://gabrielduarte77.wordpress.com/2012/02/" title="febrero 2012">febrero 2012</a>&nbsp;(1)</li>
	<li><a href="http://gabrielduarte77.wordpress.com/2012/01/" title="enero 2012">enero 2012</a>&nbsp;(18)</li>
		</ul>
</li>
		</ul>
	</div><!-- #sidebar .widget-area -->

	
</div><!-- #main -->

		<div id="footer" role="contentinfo">
			
				<div id="copyright">
					<p>
	 					<a href="http://es.wordpress.com/?ref=footer" rel="generator">Blog de WordPress.com</a>.
						Tema: Mystique por <a href="http://digitalnature.eu/" rel="designer">digitalnature</a>.					</p>
				</div><!-- #copyright -->
			</div><!-- #footer -->
	</div><!-- #container -->
</div><!-- #page -->


<script type="text/javascript">
var _qevents = _qevents || [], wpcomQuantcastData = {"qacct":"p-18-mFEk4J448M","labels":",language.es,type.wpcom"};
function wpcomQuantcastPixel( labels, options ) {
	var i, defaults = wpcomQuantcastData, data = { event: 'ajax' };

	labels  = labels  || '';
	options = options || {};

	if ( typeof labels != 'string' )
		options = labels;

	for ( i in defaults ) {
		data[i] = defaults[i];
	}

	for ( i in options ) {
		data[i] = options[i];
	}

	if ( data.labels ) {
		data.labels += ',' + labels;
	} else {
		data.labels = labels;
	}

	_qevents.push( data );
};
(function() {var elem = document.createElement('script');elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem, scpt);  })();
_qevents.push( wpcomQuantcastData );
</script>
<noscript>&lt;div style="display: none;"&gt;&lt;img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.es%2Ctype.wpcom" height="1" width="1" alt="" /&gt;&lt;/div&gt;</noscript>

<script type="text/javascript" src="./parte2_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./parte2_files/wpgroho.js"></script>
<script>jQuery(document).ready(function($){ Gravatar.profile_cb = function( h, d ) { WPGroHo.syncProfileData( h, d );	}; Gravatar.my_hash = WPGroHo.my_hash; Gravatar.init( 'body', '#wp-admin-bar-my-account' ); });</script>	<div style="display:none">
	</div>

	<div id="bit" class="loggedout-follow-normal" style="bottom: -239px;">
		<a class="bsub" href="javascript:void(0)"><span id="bsub-text">Seguir</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow “Pregúntale Al Gabo”</label></h3>

			<form action="https://subscribe.wordpress.com/" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>

			
			<p><input type="email" name="email" style="width: 95%; padding: 1px 2px" value="Introduce tu dirección de correo electrónico" onfocus="this.value=(this.value==&quot;Introduce tu dirección de correo electrónico&quot;) ? &quot;&quot; : this.value;" onblur="this.value=(this.value==&quot;&quot;) ? &quot;Enter email address&quot; : this.value;" id="loggedout-follow-field"></p>

			<input type="hidden" name="action" value="subscribe">
			<input type="hidden" name="blog_id" value="31988706">
			<input type="hidden" name="source" value="http://gabrielduarte77.wordpress.com/category/yii-framework/">
			<input type="hidden" name="sub-type" value="loggedout-follow">

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="85fb924aa9"><input type="hidden" name="_wp_http_referer" value="/category/yii-framework/">
			<p id="bsub-subscribe-button"><input type="submit" value="Sign me up"></p>
			</form>
					<div id="bsub-credit"><a href="http://wordpress.com/signup/?ref=lof">Ofrecido por WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->
<script type="text/javascript" src="./parte2_files/widgets.js"></script>
<script type="text/javascript" src="./parte2_files/saved_resource(2)"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var themecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter-wpcom/shThemeDefault.css?m=1267535107g&amp;ver=2.1.364b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.getElementsByTagName("head")[0].appendChild(themecss);
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1307725260g';
	SyntaxHighlighter.config.strings.expandSource = 'Mostrar código.';
	SyntaxHighlighter.config.strings.viewSource = 'ver fuente';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copiar al portapapeles';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'imprimir';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.all();
</script>
<script type="text/javascript">
/* <![CDATA[ */
var thickboxL10n = {"next":"Siguiente >","prev":"< Anterior","image":"Imagen","of":"de","close":"Cerrar","noiframes":"Esta funci\u00f3n requiere de frames insertados. Tienes los iframes desactivados o tu navegador no los soporta.","loadingAnimation":"http:\/\/gabrielduarte77.wordpress.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif","closeImage":"http:\/\/gabrielduarte77.wordpress.com\/wp-includes\/js\/thickbox\/tb-close.png"};
var thickboxL10n = {"next":"Siguiente >","prev":"< Anterior","image":"Imagen","of":"de","close":"Cerrar","noiframes":"Esta funci\u00f3n requiere de frames insertados. Tienes los iframes desactivados o tu navegador no los soporta.","loadingAnimation":"http:\/\/gabrielduarte77.wordpress.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif","closeImage":"http:\/\/gabrielduarte77.wordpress.com\/wp-includes\/js\/thickbox\/tb-close.png"};
/* ]]> */
</script>
<script type="text/javascript" src="./parte2_files/saved_resource(3)"></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="./parte2_files/w.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'31988706','v':'wpcom','tz':'0','user_id':'0','subd':'gabrielduarte77'});
ex_go({'crypt':'UE40eW5QN0p8M2Y/RE1LVmwrVi5vQS5fVFtfdHBbPyw1VXIrU3hWLHhzVndTdktBX0ddJnpXRjVaOTd6fj1YMX4ydzR4NTB6Qz9YLFBRWTFdSG15X0JweHguQTRWJVhQPzh8XVMzb3pVSHFTZ2RxUC8yMGE0UXlDZHJwNE1YVHVrUnRJSzYveTY3ejAsPVl0MFZXLjRlN29KLEMsbFZ6RDgmfHA1QUtvRyxoPzFmQ3IwOTRyUlpkenBjeVkwTHpERkpRZm5VTlpwXzYrOXE5UTdJT1R1aEYwcmFoNjFGNnhpd0c/OVV5OHJhTj1ILWFiTllFN1YxVUtLZ1lBdy53TXBfeDkrSXhZRU5lX2VPNDZIJkVvU09fMlhwTkJ2SmU1'});
addLoadEvent(function(){linktracker_init('31988706',0);});
	</script><img id="wpstats" src="./parte2_files/g.gif" alt=""><img id="wpstats2" src="./parte2_files/g(1).gif" alt="" style="display:none">
<noscript>&lt;img src="http://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /&gt;</noscript>


</body></html>