<!DOCTYPE html>
<!-- saved from url=(0067)http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/ -->
<html lang="es"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>Yii Framework « Pregúntale Al Gabo</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" type="text/css" media="all" href="./parte1_files/style.css">
<link rel="pingback" href="http://gabrielduarte77.wordpress.com/xmlrpc.php">
<link rel="alternate" type="application/rss+xml" title="Pregúntale Al Gabo » Feed" href="http://gabrielduarte77.wordpress.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Pregúntale Al Gabo » RSS de los comentarios" href="http://gabrielduarte77.wordpress.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Pregúntale Al Gabo » Yii Framework RSS de la categoría" href="http://gabrielduarte77.wordpress.com/category/yii-framework/feed/">
<script src="./parte1_files/quant.js" async="" type="text/javascript"></script><script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" id="all-css-0" href="./parte1_files/saved_resource" type="text/css" media="all">
<link rel="stylesheet" id="print-css-0" href="./parte1_files/global-print.css" type="text/css" media="print">
<script type="text/javascript">
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"No se ha completado su suscripcion, por favor intentelo de nuevo con una direcci\u00f3n de correo valida."};
/* ]]> */
</script>
<script type="text/javascript" src="./parte1_files/saved_resource(1)"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://gabrielduarte77.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://gabrielduarte77.wordpress.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress.com">
<link rel="shortcut icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976023g" sizes="16x16 24x24 32x32 48x48">
<link rel="icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976023g" sizes="16x16 24x24 32x32 48x48">
<link rel="apple-touch-icon-precomposed" href="http://s0.wp.com/i/webclip.png?m=1311618091g">
<link rel="openid.server" href="http://gabrielduarte77.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="http://gabrielduarte77.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="http://gabrielduarte77.wordpress.com/osd.xml" title="Pregúntale Al Gabo">
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com">
		<style>
		/* <![CDATA[ */
		/* Block: reblog */
		
		.reblog-from img                   { margin: 0 10px 0 0; vertical-align: middle; padding: 0; border: 0; }
		.reblogger-note img.avatar         { float: left; padding: 0; border: 0; }
		.reblogger-note-content            { margin: 0 0 20px; }
		.reblog-post .wpcom-enhanced-excerpt-content { border-left: 3px solid #eee; padding-left: 15px; }
		.reblog-post ul.thumb-list         { display: block; list-style: none; margin: 2px 0; padding: 0; clear: both; }
		.reblog-post ul.thumb-list li      { display: inline; margin: 0; padding: 0 1px; border: 0; }
		.reblog-post ul.thumb-list li a    { margin: 0; padding: 0; border: 0; }
		.reblog-post ul.thumb-list li img  { margin: 0; padding: 0; border: 0; }
		
		.reblog-post .wpcom-enhanced-excerpt { clear: both; }
		
		.reblog-post .wpcom-enhanced-excerpt address,
		.reblog-post .wpcom-enhanced-excerpt li,
		.reblog-post .wpcom-enhanced-excerpt h1,
		.reblog-post .wpcom-enhanced-excerpt h2,
		.reblog-post .wpcom-enhanced-excerpt h3,
		.reblog-post .wpcom-enhanced-excerpt h4,
		.reblog-post .wpcom-enhanced-excerpt h5,
		.reblog-post .wpcom-enhanced-excerpt h6,
		.reblog-post .wpcom-enhanced-excerpt p { font-size: 100% !important; }
		
		.reblog-post .wpcom-enhanced-excerpt blockquote,
		.reblog-post .wpcom-enhanced-excerpt pre,
		.reblog-post .wpcom-enhanced-excerpt code,
		.reblog-post .wpcom-enhanced-excerpt q { font-size: 98% !important; }
		

		/* ]]> */		
		</style>
		<meta name="application-name" content="Pregúntale Al Gabo"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Música, Software y Base de Datos"><meta name="msapplication-task" content="name=Subscribir;action-uri=http://gabrielduarte77.wordpress.com/feed/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Registrar un blog gratuito;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Soporte de WordPress.com;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Foros de WordPress.com;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="title" content="Entradas sobre Yii Framework en Pregúntale Al Gabo">
<meta name="description" content="Posts about Yii Framework written by gabrielduarte77">
<link rel="stylesheet" type="text/css" href="./parte1_files/shThemeDefault.css"><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./parte1_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./parte1_files/services.css"></head>

<body class="archive paged category category-yii-framework category-15920252 paged-2 category-paged-2 content-sidebar highlander-enabled highlander-light" data-twttr-rendered="true">
<div id="page">

	<div id="container">

		<ul class="skip">
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#access">Skip to navigation</a></li>
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#main">Skip to main content</a></li>
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#sidebar">Skip to primary sidebar</a></li>
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#sidebar2">Skip to secondary sidebar</a></li>
			<li><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#footer">Skip to footer</a></li>
		</ul>

		<div id="header">
			<div id="branding" class="clear-block">
							<h3 id="logo">
				<span>
					<a href="http://gabrielduarte77.wordpress.com/" title="Pregúntale Al Gabo" rel="home">Pregúntale Al Gabo</a>
				</span>
				</h3>
				<div id="site-description">Música, Software y Base de Datos</div>
			</div><!-- #branding-->

			<div id="access" class="clear-block" role="navigation">
				<ul id="menu-yii-framework" class="menu"><li id="menu-item-70" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-70"><a title="INICIO" href="http://gabrielduarte77.wordpress.com/">Inicio</a></li>
<li id="menu-item-69" class="menu-item menu-item-type-taxonomy menu-item-object-category current-menu-item menu-item-69"><a title="YII FRAMEWORK" href="http://gabrielduarte77.wordpress.com/category/yii-framework/">Yii Framework</a></li>
<li id="menu-item-137" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-137"><a href="http://gabrielduarte77.wordpress.com/category/postgresql/">PostgreSQL</a></li>
</ul>
				<div class="social-icons">

											<a href="http://www.youtube.com/gabrielduarte77" class="youtube">You Tube</a>
					
					
											<a href="http://www.twitter.com/gabrielduarte77" class="twitter">Twitter</a>
					
											<a href="http://www.facebook.com/gabrielduarte77" class="facebook">Facebook</a>
					
					
				</div><!-- .social-icons -->

			</div><!-- #access -->

							
			</div><!-- #header-->

			<div id="main">
 			<div id="content-container">
	 			<div id="content">
					<h1 class="archive-title">Archivo de la categoría: <span>Yii Framework</span></h1>
					


		<div class="post-92 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-8-orden-por-defecto-y-condicion-extra-en-grid/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 8) – ORDEN POR DEFECTO Y CONDICION EXTRA EN GRID">TUTORIAL YII FRAMEWORK (CAPÍTULO 8) – ORDEN POR DEFECTO Y CONDICION EXTRA EN&nbsp;GRID</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-8-orden-por-defecto-y-condicion-extra-en-grid/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 8) – ORDEN POR DEFECTO Y CONDICION EXTRA EN GRID">ene 27</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">A continuación vamos explicar como hacemos para ordenar nuestro Grid bajo el criterio que queramos, eso lo hacemos modificando el parámetro sort del CActiveDataProvider que se encuentra en la función search del modelo, de igual modo vamos a agregar un condición extra en la búsqueda, en nuestro caso filtramos por el estatus.</p>
<p></p><div id="highlighter_124868" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_124868_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_124868" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;condition = </code><code class="string">"estatus=true"</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$sort</code><code class="plain">=</code><code class="keyword">new</code> <code class="plain">CSort();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$sort</code><code class="plain">-&gt;defaultOrder=</code><code class="string">'num_control DESC'</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">y el CActivedataProvider queda </code><code class="keyword">as</code><code class="plain">í:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">return</code> <code class="keyword">new</code> <code class="plain">CActiveDataProvider(</code><code class="variable">$this</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'criteria'</code><code class="plain">=&gt;</code><code class="variable">$criteria</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'sort'</code><code class="plain">=&gt;</code><code class="variable">$sort</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">));</code></td></tr></tbody></table></div></div></div><p></p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-8-orden-por-defecto-y-condicion-extra-en-grid/#respond" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 8) – ORDEN POR DEFECTO Y CONDICION EXTRA EN GRID">Dejar un comentario</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-88 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/tutorial-yii-framework-capitulo-7-validando-los-formularios/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 7) – VALIDANDO LOS FORMULARIOS">TUTORIAL YII FRAMEWORK (CAPÍTULO 7) – VALIDANDO LOS&nbsp;FORMULARIOS</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/tutorial-yii-framework-capitulo-7-validando-los-formularios/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 7) – VALIDANDO LOS FORMULARIOS">ene 26</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p>Si queremos validar nuestros campos lo hacemos en el método rules() del modelo en cuestión:</p>
<p></p><div id="highlighter_359152" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_359152_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_359152" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">rules()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="keyword">return</code> <code class="keyword">array</code><code class="plain">( );</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>La validación mas obvia es la de hacer tu campo obligatorio:</p>
<p></p><div id="highlighter_183051" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_183051_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_183051" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'nombre, correo, edad'</code><code class="plain">, </code><code class="string">'required'</code><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p>También puedes especificar que el valor sea numero, incluso entero:</p>
<p></p><div id="highlighter_34630" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_34630_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_34630" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'monto'</code><code class="plain">, </code><code class="string">'numerical'</code><code class="plain">, </code><code class="string">'integerOnly'</code><code class="plain">=&gt;true),</code></td></tr></tbody></table></div></div></div><p></p>
<p>Para cadenas podemos restringir la longitud:</p>
<p></p><div id="highlighter_214439" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_214439_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_214439" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'name'</code><code class="plain">,</code><code class="string">'length'</code><code class="plain">,</code><code class="string">'min'</code><code class="plain">=&gt;6, </code><code class="string">'max'</code><code class="plain">=&gt;40),</code></td></tr></tbody></table></div></div></div><p></p>
<p>Otra validación valiosa es para los correos electrónicos:</p>
<p></p><div id="highlighter_833306" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_833306_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_833306" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'userEmail'</code><code class="plain">, </code><code class="string">'email'</code><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p>o para enlaces:</p>
<p></p><div id="highlighter_228901" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_228901_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_228901" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'link'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p>Si queremos validar que un campo sea único en la base de datos colocamos lo siguiente:</p>
<p></p><div id="highlighter_659894" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_659894_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_659894" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'campo'</code><code class="plain">, </code><code class="string">'unique'</code><code class="plain">, </code><code class="string">'attributeName'</code><code class="plain">=&gt;</code><code class="string">'NombreModelo.dato'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">&lt;pre&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Para comparar dos campos del mismo formulario es así:</p>
<p></p><div id="highlighter_743736" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_743736_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_743736" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'monto_auditado'</code><code class="plain">,</code><code class="string">'compare'</code><code class="plain">,</code><code class="string">'compareAttribute'</code><code class="plain">=&gt;</code><code class="string">'monto_contratado'</code><code class="plain">,</code><code class="string">'operator'</code><code class="plain">=&gt;</code><code class="string">'&lt;='</code><code class="plain">,</code><code class="string">'message'</code><code class="plain">=&gt;'El</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">Monto Auditado debe ser un numero menor o igual al monto contratado'),</code></td></tr></tbody></table></div></div></div><p></p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/tutorial-yii-framework-capitulo-7-validando-los-formularios/#respond" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 7) – VALIDANDO LOS FORMULARIOS">Dejar un comentario</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-71 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/clavesforaneasenyi/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 6) – CLAVES FORÁNEAS EN VISTAS">TUTORIAL YII FRAMEWORK (CAPÍTULO 6) – CLAVES FORÁNEAS EN&nbsp;VISTAS</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/clavesforaneasenyi/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 6) – CLAVES FORÁNEAS EN VISTAS">ene 26</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">Suponiendo que tenemos las siguientes tablas:</p>
<p><a href="http://gabrielduarte77.files.wordpress.com/2012/01/tablas.png"><img class="aligncenter size-full wp-image-80" title="TABLAS" src="./parte1_files/tablas.png" alt=""></a></p>
<p style="text-align:justify;">Donde id_estado es clave foránea en municipio y hace referencia al id de la tabla estado.&nbsp;Al crear el modelo y el CRUD para ambas tablas con la herramienta Gii tenemos como resultado que&nbsp;en las distintas vistas del modelo Municipio el estado al que pertenece dicho municipio siempre aparece&nbsp;reflejado con su id, para cambiar esto y que aparezca el nombre del estado en las distintas vistas debemos&nbsp;cambiar varias lineas de código, a continuación te explicamos como hacerlo.&nbsp;Si las relacionamos bien en el gestor de base de datos Yii por defecto nos configura la relación entre&nbsp;ellas, Definimos la relación en el modelo Municipio:</p>
<p></p><div id="highlighter_722128" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_722128_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_722128" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">relations()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="keyword">return</code> <code class="keyword">array</code><code class="plain">(</code><code class="string">'estado'</code> <code class="plain">=&gt; </code><code class="keyword">array</code><code class="plain">(self::BELONGS_TO, </code><code class="string">'Estado'</code><code class="plain">, </code><code class="string">'id_estado'</code><code class="plain">) );</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>La mejor forma de representar a los estados en los formularios de creación y modificación de&nbsp;municipios es con un combo box (drop down list), para eso colocamos la siguiente linea en el archivo&nbsp;<strong>/protected/views/municipio/_form.php</strong></p>
<p></p><div id="highlighter_70350" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_70350_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_70350" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;dropDownList(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_estado'</code><code class="plain">, CHtml::listData(Estado::model()-</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">&gt;findAll(), </code><code class="string">'id'</code><code class="plain">, </code><code class="string">'nombre_estado'</code><code class="plain">)); ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>En lugar de:</p>
<p></p><div id="highlighter_464056" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_464056_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_464056" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="variable">$form</code><code class="plain">-&gt;textField(</code><code class="variable">$model</code><code class="plain">,</code><code class="string">'id_estado'</code><code class="plain">); ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Para colocar el nombre del estado en el “Detail View” de cada municipio nos vamos al archivo&nbsp;<strong>/protected/views/municipio/_view.php</strong> y modificamos las siguientes lineas:</p>
<p></p><div id="highlighter_384719" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_384719_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_384719" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="plain">CHtml::encode(</code><code class="variable">$data</code><code class="plain">-&gt;getAttributeLabel(</code><code class="string">'id_estado'</code><code class="plain">)); ?&gt;:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="plain">CHtml::encode(</code><code class="variable">$data</code><code class="plain">-&gt;id_estado); ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>y colocamos:</p>
<p></p><div id="highlighter_725766" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_725766_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_725766" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="plain">CHtml::encode(</code><code class="variable">$data</code><code class="plain">-&gt;getAttributeLabel(</code><code class="string">'Nombre Estado'</code><code class="plain">)); ?&gt;:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">&lt;?php </code><code class="functions">echo</code> <code class="plain">CHtml::encode(</code><code class="variable">$data</code><code class="plain">-&gt;estado-&gt;nombre_estado); ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Si queremos que aparezca el nombre del estado en el View (Mostrar) del municipio abrimos el&nbsp;archivo&nbsp;<strong>/protected/views/municipio/view.php</strong> y nos fijamos en el siguiente código:</p>
<p></p><div id="highlighter_236487" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_236487_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_236487" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="variable">$this</code><code class="plain">-&gt;widget(</code><code class="string">'zii.widgets.CDetailView'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="string">'data'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="string">'attributes'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="string">'id'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="string">'nombre_municipio'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="string">'id_estado'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">)); ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Donde dice ‘id_estado’ cambiamos por ‘estado.nombre_estado’ .&nbsp;Si deseamos que aparezca el nombre del estado en el listado de municipios (Manage) modificamos en&nbsp;<strong>/protected/views/municipio/admin.php</strong></p>
<p></p><div id="highlighter_856777" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_856777_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_856777" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="variable">$this</code><code class="plain">-&gt;widget(</code><code class="string">'zii.widgets.grid.CGridView'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="string">'id'</code><code class="plain">=&gt;</code><code class="string">'municipio-grid'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="string">'dataProvider'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">-&gt;search(),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="string">'filter'</code><code class="plain">=&gt;</code><code class="variable">$model</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="string">'columns'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="string">'id'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="string">'nombre_municipio'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="string">'id_estado'</code><code class="plain">,</code></td></tr></tbody></table></div></div></div><p></p>
<p>cambiamos ‘id_estado’ por</p>
<p></p><div id="highlighter_135879" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_135879_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_135879" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code> <code class="plain">(</code><code class="string">'name'</code><code class="plain">=&gt;</code><code class="string">'id_estado'</code><code class="plain">,</code><code class="string">'value'</code><code class="plain">=&gt;</code><code class="string">'$data-&gt;estado-&gt;nombre_estado'</code><code class="plain">,</code><code class="string">'type'</code><code class="plain">=&gt;</code><code class="string">'text'</code><code class="plain">,)</code></td></tr></tbody></table></div></div></div><p></p>
<p>Adicionalmente, para que la búsqueda pueda funcionar nos vamos a /protected/models/Municipio.php<br>
y modificamos la función search.</p>
<p>Y donde aparece:</p>
<p></p><div id="highlighter_189415" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_189415_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_189415" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;compare(</code><code class="string">'id_estado'</code><code class="plain">,</code><code class="variable">$this</code><code class="plain">-&gt;id_estado);</code></td></tr></tbody></table></div></div></div><p></p>
<p>colocamos:</p>
<p></p><div id="highlighter_148092" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_148092_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_148092" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;with =</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'estado'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;addSearchCondition(</code><code class="string">'estado.nombre_estado'</code><code class="plain">, </code><code class="variable">$this</code><code class="plain">-&gt;id_estado);</code></td></tr></tbody></table></div></div></div><p></p>
<p>Si queremos que traiga tanto con minúsculas o mayúsculas colocamos:</p>
<p></p><div id="highlighter_550366" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_550366_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_550366" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="variable">$criteria</code><code class="plain">-&gt;addSearchCondition(</code><code class="string">'LOWER(estado.nombre_estado)'</code><code class="plain">, </code><code class="functions">strtolower</code><code class="plain">(</code><code class="variable">$this</code><code class="plain">-&gt;id_estado));</code></td></tr></tbody></table></div></div></div><p></p>
<p>Si queremos que la búsqueda en el admin se haga mediante un combo colocamos:</p>
<p></p><div id="highlighter_229752" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_229752_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_229752" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="string">'header'</code><code class="plain">=&gt;</code><code class="string">'Estado'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="comments">// Nombre de la columna en el CGridView</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="string">'name'</code><code class="plain">=&gt;</code><code class="string">'id_estado'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="comments">// Nombre del dato en el modelo</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="string">'value'</code> <code class="plain">=&gt; </code><code class="string">'$data-&gt;estado-&gt;nombre_estado'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="comments">// Valor a mostrar</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="string">'htmlOptions'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'style'</code><code class="plain">=&gt;</code><code class="string">'text-align: center'</code><code class="plain">,</code><code class="string">'width'</code><code class="plain">=&gt;</code><code class="string">'80px'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="comments">// Opciones HTML</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="string">'filter'</code> <code class="plain">=&gt; CHtml::listData(TipoOrgG::model()-&gt;findAll(), </code><code class="string">'id_estado'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="string">'nombre_estado'</code><code class="plain">), </code><code class="comments">// Colocamos un combo en el filtro</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p>Para crear un combo cuyos datos no provengan de la base de datos lo hacemos de esta forma:</p>
<p></p><div id="highlighter_358612" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_358612_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_358612" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="variable">$options</code> <code class="plain">= </code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'id_tipo_org'</code><code class="plain">=&gt;1, </code><code class="string">'descripcion'</code><code class="plain">=&gt;</code><code class="string">'Dato 1'</code><code class="plain">), </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'id_tipo_org'</code><code class="plain">=&gt;2, </code><code class="string">'descripcion'</code><code class="plain">=&gt;</code><code class="string">'Dato 2'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="keyword">array</code><code class="plain">( </code><code class="string">'header'</code><code class="plain">=&gt;</code><code class="string">'Prueba'</code><code class="plain">, </code><code class="string">'name'</code><code class="plain">=&gt;</code><code class="string">'id_tipo_org'</code><code class="plain">, </code><code class="string">'value'</code> <code class="plain">=&gt; </code><code class="string">'$data-&gt;idTipoOrg-&gt;descripcion'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="string">'htmlOptions'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'style'</code><code class="plain">=&gt;</code><code class="string">'text-align: center'</code><code class="plain">,</code><code class="string">'width'</code><code class="plain">=&gt;</code><code class="string">'80px'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="string">'filter'</code><code class="plain">=&gt;CHtml::listData(</code><code class="variable">$options</code><code class="plain">, </code><code class="string">'id_tipo_org'</code><code class="plain">, </code><code class="string">'descripcion'</code><code class="plain">), ),</code></td></tr></tbody></table></div></div></div><p></p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/clavesforaneasenyi/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 6) – CLAVES FORÁNEAS EN VISTAS">3 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-56 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/autenticacion-de-usuarios/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 5) – AUTENTICACIÓN DE USUARIOS">TUTORIAL YII FRAMEWORK (CAPÍTULO 5) – AUTENTICACIÓN DE&nbsp;USUARIOS</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/autenticacion-de-usuarios/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 5) – AUTENTICACIÓN DE USUARIOS">ene 26</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">Este es el sql de la tabla donde se guardaran nuestros usuarios:</p>
<p></p><div id="highlighter_662545" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_662545_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_662545" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">CREATE</code> <code class="keyword">TABLE</code> <code class="plain">usuario (</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">id serial </code><code class="color1">NOT</code> <code class="color1">NULL</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">username </code><code class="keyword">character</code> <code class="keyword">varying</code><code class="plain">(128) </code><code class="color1">NOT</code> <code class="color1">NULL</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">password</code> <code class="keyword">character</code> <code class="keyword">varying</code><code class="plain">(128) </code><code class="color1">NOT</code> <code class="color1">NULL</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">CONSTRAINT</code> <code class="plain">usuario_pkey </code><code class="keyword">PRIMARY</code> <code class="keyword">KEY</code> <code class="plain">(id) )</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="keyword">WITH</code> <code class="plain">(OIDS=</code><code class="keyword">FALSE</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="keyword">ALTER</code> <code class="keyword">TABLE</code> <code class="plain">usuario OWNER </code><code class="keyword">TO</code> <code class="plain">postgres;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Debes crear el modelo y el CRUD de esta tabla con el Gii</p>
<p>En <strong>protected/components/UserIdentity.php</strong> sustituimos la clase UserIdentity por:</p>
<p></p><div id="highlighter_783189" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_783189_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_783189" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">class</code> <code class="plain">UserIdentity </code><code class="keyword">extends</code> <code class="plain">CUserIdentity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">private</code> <code class="variable">$_id</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">authenticate()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$username</code><code class="plain">=</code><code class="functions">strtolower</code><code class="plain">(</code><code class="variable">$this</code><code class="plain">-&gt;username);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$user</code><code class="plain">=Usuario::model()-&gt;find(</code><code class="string">'LOWER(username)=?'</code><code class="plain">,</code><code class="keyword">array</code><code class="plain">(</code><code class="variable">$username</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">if</code><code class="plain">(</code><code class="variable">$user</code><code class="plain">===null)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$this</code><code class="plain">-&gt;errorCode=self::ERROR_USERNAME_INVALID;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">else</code> <code class="keyword">if</code><code class="plain">(!</code><code class="variable">$user</code><code class="plain">-&gt;validatePassword(</code><code class="variable">$this</code><code class="plain">-&gt;password))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$this</code><code class="plain">-&gt;errorCode=self::ERROR_PASSWORD_INVALID;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">else</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$this</code><code class="plain">-&gt;_id=</code><code class="variable">$user</code><code class="plain">-&gt;id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$this</code><code class="plain">-&gt;username=</code><code class="variable">$user</code><code class="plain">-&gt;username;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$this</code><code class="plain">-&gt;errorCode=self::ERROR_NONE;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">return</code> <code class="variable">$this</code><code class="plain">-&gt;errorCode==self::ERROR_NONE;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">getId()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">return</code> <code class="variable">$this</code><code class="plain">-&gt;_id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>En <strong>protected/models/Usuario.php</strong> agregar las siguientes funciones:</p>
<p></p><div id="highlighter_511357" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_511357_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_511357" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">validatePassword(</code><code class="variable">$password</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">return</code> <code class="variable">$this</code><code class="plain">-&gt;hashPassword(</code><code class="variable">$password</code><code class="plain">)===</code><code class="variable">$this</code><code class="plain">-&gt;password;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">hashPassword(</code><code class="variable">$password</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">return</code> <code class="plain">md5(</code><code class="variable">$password</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>Para que la clave se guarde en MD5 al crear los usuarios agregar la siguiente linea en la función actionCreate del controlador <strong>protected/controllers/UsuarioController.php</strong>, hacer lo mismo con la función actionUpdate</p>
<p></p><div id="highlighter_687461" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_687461_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_687461" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="variable">$model</code><code class="plain">-&gt;attributes=</code><code class="variable">$_POST</code><code class="plain">[</code><code class="string">'Usuario'</code><code class="plain">];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="comments">////////////////////////////////////////////////////////////</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="comments">//////////////////LINEA A AGREGAR//////////////////////////</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="variable">$model</code><code class="plain">-&gt;password=md5(</code><code class="variable">$model</code><code class="plain">-&gt;password);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="comments">///////////////////////////////////////////////////////////</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">if</code><code class="plain">(</code><code class="variable">$model</code><code class="plain">-&gt;save())</code></td></tr></tbody></table></div></div></div><p></p>
<p>Para otorgar o denegar permisos a usuarios también se modifica el controlador del modelo, en este caso <strong>protected/controllers/UsuarioController.php</strong>, vamos a la función accessRules:</p>
<p></p><div id="highlighter_726848" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_726848_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_726848" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">function</code> <code class="plain">accessRules()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">return</code> <code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'allow'</code><code class="plain">, </code><code class="comments">// allow all users to perform 'index' and 'view' actions</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'actions'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'index'</code><code class="plain">,</code><code class="string">'view'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'users'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'*'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'allow'</code><code class="plain">, </code><code class="comments">// allow authenticated user to perform 'create' and 'update' actions</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'actions'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'create'</code><code class="plain">,</code><code class="string">'update'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'users'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'@'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'allow'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'actions'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'admin'</code><code class="plain">,</code><code class="string">'delete'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'users'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'@'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'deny'</code><code class="plain">, </code><code class="comments">// deny all users</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'users'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'*'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;" align="JUSTIFY">En el arreglo actions ponemos las acciones que tiene el controlador y en users los usuarios, si queremos que solo accedan los que están autenticados ponemos una ‘@’ y si queremos que acceda cualquier personas usamos ‘*’.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/26/autenticacion-de-usuarios/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 5) – AUTENTICACIÓN DE USUARIOS">4 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-51 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/modificandoelmenudeyii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 4) – MODIFICANDO EL MENÚ">TUTORIAL YII FRAMEWORK (CAPÍTULO 4) – MODIFICANDO EL&nbsp;MENÚ</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/modificandoelmenudeyii/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 4) – MODIFICANDO EL MENÚ">ene 25</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">A continuación vamos a modificar el menú, de tal forma que nos quede mas espacio para las vistas y las acciones de las vistas (crear, modificar, eliminar) se coloquen por debajo del menú principal. Para eso modificamos el <strong>/protected/views/layouts/column2.php</strong>:<br>
- Cambiamos el nombre del id del div “sidebar” por “mainmenu”.<br>
- Colocamos el nuevo div “mainmenu” (completo) dentro del div con class=“span-19”.<br>
- Cambiamos class=“span-19” por class”span-25”.<br>
- Comentamos las siguientes lineas de código:</p>
<p></p><div id="highlighter_838534" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_838534_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_838534" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;beginWidget(</code><code class="string">'zii.widgets.CPortlet'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'title'</code><code class="plain">=&gt;</code><code class="string">'Operations'</code><code class="plain">,));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'htmlOptions'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'class'</code><code class="plain">=&gt;</code><code class="string">'operations'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="variable">$this</code><code class="plain">-&gt;endWidget();</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">En el <strong>/protected/views/layouts/main.php, </strong>comentamos las lineas:</p>
<p></p><div id="highlighter_729536" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_729536_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_729536" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;?php </code><code class="keyword">if</code><code class="plain">(isset(</code><code class="variable">$this</code><code class="plain">-&gt;breadcrumbs)):?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;?php </code><code class="variable">$this</code><code class="plain">-&gt;widget(</code><code class="string">'zii.widgets.CBreadcrumbs'</code><code class="plain">, </code><code class="keyword">array</code><code class="plain">(</code><code class="string">'links'</code><code class="plain">=&gt;</code><code class="variable">$this</code><code class="plain">-&gt;breadcrumbs,)); ?&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">&lt;?php </code><code class="keyword">endif</code><code class="plain">?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">&lt;p style=</code><code class="string">"text-align: justify;"</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Al aplicar estos cambios el menú quedaría mas o menos así:</p>
<p style="text-align:justify;"><a href="http://gabrielduarte77.files.wordpress.com/2012/01/menu.png"><img class="aligncenter size-full wp-image-52" title="MENU" src="./parte1_files/menu.png" alt=""></a></p>
<p style="text-align:justify;">Si queremos un menú mas potente podemos usar la extensión mbmenu<br>
- Bajamos la extensión de la pagina oficial de Yii y copiamos la carpeta <strong>/protected/extensions</strong><br>
- En <strong>/protected/views/layouts/main.php</strong> cambiar el widget del CMenu por algo como:</p>
<p></p><div id="highlighter_232543" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_232543_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_232543" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;?php </code><code class="variable">$this</code><code class="plain">-&gt;widget(</code><code class="string">'application.extensions.mbmenu.MbMenu'</code><code class="plain">,</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'items'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Home'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'/site/index'</code><code class="plain">)),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Principal'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'/site/contact'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'items'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Usuarios'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'/usuario'</code><code class="plain">)),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Contratos'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'/contrato'</code><code class="plain">)),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Prueba'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'items'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Sub 1'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'/site/page'</code><code class="plain">,</code><code class="string">'view'</code><code class="plain">=&gt;</code><code class="string">'sub1'</code><code class="plain">)),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Sub 2'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'items'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Sub sub 1'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'/site/page'</code><code class="plain">,</code><code class="string">'view'</code><code class="plain">=&gt;</code><code class="string">'subsub1'</code><code class="plain">)),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Sub sub 2'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'/site/page'</code><code class="plain">,</code><code class="string">'view'</code><code class="plain">=&gt;</code><code class="string">'subsub2'</code><code class="plain">)),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">)); ?&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Al colocar el nuevo menú seguramente se ve extraño, para evitar esto debemos quitar el id=“mainmenu”, con estos cambios queda mas espacio para las vistas y el pequeño menú de la derecha queda por debajo del menú principal.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/modificandoelmenudeyii/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 4) – MODIFICANDO EL MENÚ">2 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-47 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/tutorial-yii-capitulo-3-lenguaje-y-vista-por-defecto/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 3) – LENGUAJE Y VISTA POR DEFECTO">TUTORIAL YII FRAMEWORK (CAPÍTULO 3) – LENGUAJE Y VISTA POR&nbsp;DEFECTO</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/tutorial-yii-capitulo-3-lenguaje-y-vista-por-defecto/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 3) – LENGUAJE Y VISTA POR DEFECTO">ene 25</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">En<strong> /protected/config/main.php</strong> al final colocar dentro del arreglo principal:</p>
<p style="text-align:justify;">Este es el lenguaje en el que quieres que muestre las cosas</p>
<p></p><div id="highlighter_224220" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_224220_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_224220" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="string">'language'</code><code class="plain">=&gt;</code><code class="string">'es'</code><code class="plain">,</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">&nbsp;Este es el lenguaje por defecto de los archivos</p>
<p></p><div id="highlighter_102542" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_102542_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_102542" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="string">'sourceLanguage'</code><code class="plain">=&gt;</code><code class="string">'en'</code><code class="plain">,</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Vista por defecto</p>
<p></p><div id="highlighter_201187" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_201187_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_201187" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="string">'defaultController'</code><code class="plain">=&gt;</code><code class="string">'controlador/admin'</code><code class="plain">,</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Si queremos colocar un favicon en el head de protected/views/layouts/main.php colocamos:</p>
<p></p><div id="highlighter_763449" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_763449_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_763449" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">link</code> <code class="color1">rel</code><code class="plain">=</code><code class="string">"shortcut icon"</code> <code class="plain">href="&lt;?php echo Yii::app()-&gt;request-&gt;baseUrl; ?&gt;/images/icon.png" type="image/x-icon" /&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/tutorial-yii-capitulo-3-lenguaje-y-vista-por-defecto/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 3) – LENGUAJE Y VISTA POR DEFECTO">5 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-12 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/creandomodelos/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 2) – CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE DATOS">TUTORIAL YII FRAMEWORK (CAPÍTULO 2) – CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE&nbsp;DATOS</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/creandomodelos/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 2) – CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE DATOS">ene 25</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">Una vez creada la aplicación abrimos el archivo <strong>/protected/config/admin.php</strong> y modificamos lo siguiente:</p>
<p></p><div id="highlighter_421111" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_421111_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_421111" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="string">'modules'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="comments">/*</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="comments">'gii'=&gt;array(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="comments">'class'=&gt;'system.gii.GiiModule',</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="comments">'password'=&gt;'Enter Your Password Here',</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="comments">'ipFilters'=&gt;array('127.0.0.1','::1'),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="comments">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="comments">*/</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Descomentamos el arreglo gii y colocamos el password que queramos, el modulo GII es el que nos ayuda a crear el modelo y el CRUD de las tablas de nuestra base de datos, a continuación vamos a configurar la conexión, para ello debemos comentar el siguiente arreglo:</p>
<p></p><div id="highlighter_107125" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_107125_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_107125" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="string">'db'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'connectionString'</code> <code class="plain">=&gt; </code><code class="string">'sqlite:'</code><code class="plain">.dirname(</code><code class="constants">__FILE__</code><code class="plain">).</code><code class="string">'/../data/testdrive.db'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Y creamos nuestro nuevo arreglo de conexión así:</p>
<p></p><div id="highlighter_554679" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_554679_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_554679" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="string">'db'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="string">'connectionString'</code> <code class="plain">=&gt; </code><code class="string">'pgsql:host=localhost;dbname=nombre_base_datos'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="string">'emulatePrepare'</code> <code class="plain">=&gt; true,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="string">'username'</code> <code class="plain">=&gt; </code><code class="string">'usuario'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="string">'password'</code> <code class="plain">=&gt; </code><code class="string">'clave.usuario'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="string">'charset'</code> <code class="plain">=&gt; </code><code class="string">'utf8'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">),</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Para dirigirnos al modelo GII copiamos en nuestra barra de direcciones algo como <strong>http://localhost/nombre_aplicacion/index.php?r=gii</strong>, nos pide el password que configuramos anteriormente, una vez dentro le damos a “Model Generator” y colocamos el nombre de la tabla, le damos Preview y luego Generate, a continuación creamos el CRUD en “Crud Generator” colocando el nombre del modelo que acabamos de crear. Si logramos conectarnos satisfactoriamente a la base de datos nos mostrará algo como la siguiente imagen.</p>
<p style="text-align:left;"><a href="http://gabrielduarte77.files.wordpress.com/2012/01/yii2.png"><img class="aligncenter size-full wp-image-37" title="yii" src="./parte1_files/yii2.png" alt=""></a></p>
<p style="text-align:justify;">Con esto hemos creado todas las vistas, el controlador y el modelo para esa tabla en particular, las vistas son: create, update, index, admin y view.<br>
Para agregar el modelo nuevo al menú nos vamos al archivo <strong>/protected/views/layouts/main.php</strong> y modificamos el arreglo de items del menú agregándole uno nuevo de la siguiente forma:</p>
<p></p><div id="highlighter_55739" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#viewSource" title="ver fuente" style="width: 16px; height: 16px;" class="item viewSource">ver fuente</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_55739_clipboard" type="application/x-shockwave-flash" title="copiar al portapapeles" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_55739" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g"></div><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#printSource" title="imprimir" style="width: 16px; height: 16px;" class="item printSource">imprimir</a><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">array</code><code class="plain">(</code><code class="string">'label'</code><code class="plain">=&gt;</code><code class="string">'Estado'</code><code class="plain">, </code><code class="string">'url'</code><code class="plain">=&gt;</code><code class="keyword">array</code><code class="plain">(</code><code class="string">'/estado/admin'</code><code class="plain">)),</code></td></tr></tbody></table></div></div></div><p></p>
<p style="text-align:justify;">Ya podemos probar que podemos crear, modificar y eliminar registros de nuestro modelo.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/creandomodelos/#respond" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 2) – CREANDO MODELOS Y CRUD A PARTIR DE UNA BASE DE DATOS">Dejar un comentario</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
		<div class="post-7 post type-post status-publish format-standard hentry category-yii-framework post-wrapper clear-block">

	
			<h2 class="post-title"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/instalandoyii-2/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 1) – INSTALANDO YII Y PRIMERA APLICACIÓN">TUTORIAL YII FRAMEWORK (CAPÍTULO 1) – INSTALANDO YII Y PRIMERA&nbsp;APLICACIÓN</a></h2>
	
	<div class="post-date">
		<p class="day"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/instalandoyii-2/" rel="bookmark" title="Enlace Permanente a TUTORIAL YII FRAMEWORK (CAPÍTULO 1) – INSTALANDO YII Y PRIMERA APLICACIÓN">ene 25</a></p>
	</div><!-- .post-date -->

	<div class="post-info clear-block">
		<p class="author alignleft">Publicado por <a href="http://gabrielduarte77.wordpress.com/author/gabrielduarte77/" title="Entradas de gabrielduarte77" rel="author">gabrielduarte77</a></p>
	</div><!-- .post-info clear-block" -->

	<div class="entry clear-block">
		<p style="text-align:justify;">Lo primero que hacemos es bajarnos la ultima versión de Yii Framework desde&nbsp;<a title="http://www.yiiframework.com" href="http://www.yiiframework.com/">http://www.yiiframework.com</a> la descomprimimos en nuestro directorio web, le cambiamos el nombre a “yii”&nbsp;y le damos permisos de lectura.</p>
<p style="text-align:justify;">Abrimos la consola, nos ubicamos en la www y colocamos: yii/framework/yiic webapp<br>
nombre_aplicacion, nos va a preguntar si queremos crear una aplicación web en ese directorio y le decimos&nbsp;que si.</p>
<p style="text-align:justify;">Con esto hemos creado nuestra primera aplicación en Yii. En el próximo capitulo se explicará como<br>
conectar nuestra aplicación con una base de datos y como crear el modelo y el CRUD de las tablas.</p>
<div id="jp-post-flair" class="sharedaddy sd-sharing-enabled"></div>			</div><!-- .entry -->

			<div class="post-meta">
			<p class="post-categories">
				Escrito en <a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas en Yii Framework" rel="category tag">Yii Framework</a>							</p>
			<p class="comment-link alignright"><a href="http://gabrielduarte77.wordpress.com/2012/01/25/instalandoyii-2/#comments" title="Comentarios en TUTORIAL YII FRAMEWORK (CAPÍTULO 1) – INSTALANDO YII Y PRIMERA APLICACIÓN">4 comentarios</a></p>
					</div><!-- .post-meta -->
	
	
</div><!-- .post-wrapper -->
	<div class="post-navigation">
		<div class="nav-previous"></div>
		<div class="nav-next"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/">Entradas más recientes →</a></div>
	</div><!-- .post-navigation -->
				</div><!-- #content -->
			</div><!-- #content-container -->


	<div id="sidebar" class="widget-area" role="complementary">
				<ul class="xoxo">

		<li id="text-2" class="widget widget_text">			<div class="textwidget">
		<div>

				Blog de música, base de datos y software en general.
		</div>
		<div>
			He compilado una serie de capítulos del framework Yii para PHP.</div>
		<div>
			Caracas, Venezuela</div>
		<div>
			gabrielduarte77@gmail.com</div>
	
</div>
		</li><li id="search-3" class="widget widget_search">
<form method="get" id="searchform" action="http://gabrielduarte77.wordpress.com/">
	<div id="searchfield">
		<label for="s" class="screen-reader-text">Buscar por:</label>
		<input type="text" name="s" id="s" class="searchtext">
		<input type="submit" value="Go" class="searchbutton">
	</div>
</form></li><li id="twitter-2" class="widget widget_twitter"><h3 class="widget-title"><span><a href="http://twitter.com/gabrielduarte77">Mis Tweets</a></span></h3><ul class="tweets">
			<li>
				Después de miles de años @<a href="http://twitter.com/Yohiglener">Yohiglener</a> se unió a twitter, bienvenida! 				<a href="http://twitter.com/gabrielduarte77/statuses/275210395956948992" class="timesince">1&nbsp;week&nbsp;ago</a>
			</li>

			
			<li>
				O qué bien lee jajaja "@<a href="http://twitter.com/manugaona">manugaona</a>: Qué bien habla Rafael Correa: <a href="http://youtu.be/6rhZwzPD_SY"> youtu.be/6rhZwzPD_SY</a>" 				<a href="http://twitter.com/gabrielduarte77/statuses/270477691449389056" class="timesince">3&nbsp;weeks&nbsp;ago</a>
			</li>

			
			<li>
				Házle mención spin "@<a href="http://twitter.com/carlosgrillet_">carlosgrillet_</a>: Gente que rompe códigos y se come la luz vale" 				<a href="http://twitter.com/gabrielduarte77/statuses/269601744181399553" class="timesince">3&nbsp;weeks&nbsp;ago</a>
			</li>

			</ul><iframe allowtransparency="true" frameborder="0" scrolling="no" src="./parte1_files/follow_button.1354761327.html" class="twitter-follow-button" style="width: 163px; height: 20px;" title="Twitter Follow Button" data-twttr-rendered="true"></iframe></li><li id="categories-2" class="widget widget_categories"><h3 class="widget-title"><span>Categorías</span></h3>		<ul>
			<li class="cat-item cat-item-15989"><a href="http://gabrielduarte77.wordpress.com/category/postgresql/" title="Ver todas las entradas archivadas en PostgreSQL">PostgreSQL</a> (3)
</li>
	<li class="cat-item cat-item-15920252 current-cat"><a href="http://gabrielduarte77.wordpress.com/category/yii-framework/" title="Ver todas las entradas archivadas en Yii Framework">Yii Framework</a> (18)
</li>
		</ul>
</li>		<li id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title"><span>Ultimas Publicaciones</span></h3>		<ul>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/06/28/migracion-de-datos-de-oracle-a-postgresql-con-kettle-migracion-de-datos-de-oracle-a-postgresql-con-kettle/" title="Migración de Datos de Oracle a PostgreSQL con Kettle">Migración de Datos de Oracle a PostgreSQL con&nbsp;Kettle</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/03/27/ejemplo-basico-de-pgcrypto/" title="Ejemplo Básico de PgCrypto">Ejemplo Básico de&nbsp;PgCrypto</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/02/10/funcion-months_between-de-oracle-en-postgresql/" title="FUNCIÓN MONTHS_BETWEEN() DE ORACLE EN POSTGRESQL">FUNCIÓN MONTHS_BETWEEN() DE ORACLE EN&nbsp;POSTGRESQL</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/campos_enmascarados_yii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 18) – CAMPOS ENMASCARADOS EN FORMULARIO">TUTORIAL YII FRAMEWORK (CAPÍTULO 18) – CAMPOS ENMASCARADOS EN&nbsp;FORMULARIO</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-17-hacer-formulario-para-multiples-modelos/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 17) – HACER FORMULARIO PARA MULTIPLES MODELOS">TUTORIAL YII FRAMEWORK (CAPÍTULO 17) – HACER FORMULARIO PARA MULTIPLES&nbsp;MODELOS</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-16-guardar-automaticamente-usuario-y-fecha-de-creacion-y-modificacion/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 16) – GUARDAR AUTOMÁTICAMENTE USUARIO Y FECHA DE CREACIÓN Y MODIFICACIÓN">TUTORIAL YII FRAMEWORK (CAPÍTULO 16) – GUARDAR AUTOMÁTICAMENTE USUARIO Y FECHA DE CREACIÓN Y&nbsp;MODIFICACIÓN</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/url_limpias_en_yii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 15) –  NO MOSTRAR INDEX.PHP EN LAS URL">TUTORIAL YII FRAMEWORK (CAPÍTULO 15) –  NO MOSTRAR INDEX.PHP EN LAS&nbsp;URL</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-14-campo-con-autocompletar/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 14) – CAMPO CON AUTOCOMPLETAR">TUTORIAL YII FRAMEWORK (CAPÍTULO 14) – CAMPO CON&nbsp;AUTOCOMPLETAR</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/combosdependientesenyii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 13) – COMBOS DEPENDIENTES">TUTORIAL YII FRAMEWORK (CAPÍTULO 13) – COMBOS&nbsp;DEPENDIENTES</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/reportesengridyii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 12) – REPORTES A PARTIR DE UNA BÚSQUEDA EN EL GRID">TUTORIAL YII FRAMEWORK (CAPÍTULO 12) – REPORTES A PARTIR DE UNA BÚSQUEDA EN EL&nbsp;GRID</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/tutorial-yii-framework-capitulo-11-exportar-del-cgridview-a-pdf/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 11) – EXPORTAR DEL CGRIDVIEW A PDF">TUTORIAL YII FRAMEWORK (CAPÍTULO 11) – EXPORTAR DEL CGRIDVIEW A&nbsp;PDF</a>
						</li>
					<li>
				<a href="http://gabrielduarte77.wordpress.com/2012/01/27/buscadaporfechasenyii/" title="TUTORIAL YII FRAMEWORK (CAPÍTULO 10) – BÚSQUEDAS POR FECHAS CON SYDATECOLUMN">TUTORIAL YII FRAMEWORK (CAPÍTULO 10) – BÚSQUEDAS POR FECHAS CON&nbsp;SYDATECOLUMN</a>
						</li>
				</ul>
		</li><li id="archives-2" class="widget widget_archive"><h3 class="widget-title"><span>Archivos</span></h3>		<ul>
			<li><a href="http://gabrielduarte77.wordpress.com/2012/06/" title="junio 2012">junio 2012</a>&nbsp;(1)</li>
	<li><a href="http://gabrielduarte77.wordpress.com/2012/03/" title="marzo 2012">marzo 2012</a>&nbsp;(1)</li>
	<li><a href="http://gabrielduarte77.wordpress.com/2012/02/" title="febrero 2012">febrero 2012</a>&nbsp;(1)</li>
	<li><a href="http://gabrielduarte77.wordpress.com/2012/01/" title="enero 2012">enero 2012</a>&nbsp;(18)</li>
		</ul>
</li>
		</ul>
	</div><!-- #sidebar .widget-area -->

	
</div><!-- #main -->

		<div id="footer" role="contentinfo">
			
				<div id="copyright">
					<p>
	 					<a href="http://es.wordpress.com/?ref=footer" rel="generator">Blog de WordPress.com</a>.
						Tema: Mystique por <a href="http://digitalnature.eu/" rel="designer">digitalnature</a>.					</p>
				</div><!-- #copyright -->
			</div><!-- #footer -->
	</div><!-- #container -->
</div><!-- #page -->


<script type="text/javascript">
var _qevents = _qevents || [], wpcomQuantcastData = {"qacct":"p-18-mFEk4J448M","labels":",language.es,type.wpcom"};
function wpcomQuantcastPixel( labels, options ) {
	var i, defaults = wpcomQuantcastData, data = { event: 'ajax' };

	labels  = labels  || '';
	options = options || {};

	if ( typeof labels != 'string' )
		options = labels;

	for ( i in defaults ) {
		data[i] = defaults[i];
	}

	for ( i in options ) {
		data[i] = options[i];
	}

	if ( data.labels ) {
		data.labels += ',' + labels;
	} else {
		data.labels = labels;
	}

	_qevents.push( data );
};
(function() {var elem = document.createElement('script');elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem, scpt);  })();
_qevents.push( wpcomQuantcastData );
</script>
<noscript>&lt;div style="display: none;"&gt;&lt;img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.es%2Ctype.wpcom" height="1" width="1" alt="" /&gt;&lt;/div&gt;</noscript>

<script type="text/javascript" src="./parte1_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./parte1_files/wpgroho.js"></script>
<script>jQuery(document).ready(function($){ Gravatar.profile_cb = function( h, d ) { WPGroHo.syncProfileData( h, d );	}; Gravatar.my_hash = WPGroHo.my_hash; Gravatar.init( 'body', '#wp-admin-bar-my-account' ); });</script>	<div style="display:none">
	</div>

	<div id="bit" class="loggedout-follow-normal" style="bottom: -239px;">
		<a class="bsub" href="javascript:void(0)"><span id="bsub-text">Seguir</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow “Pregúntale Al Gabo”</label></h3>

			<form action="https://subscribe.wordpress.com/" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>

			
			<p><input type="email" name="email" style="width: 95%; padding: 1px 2px" value="Introduce tu dirección de correo electrónico" onfocus="this.value=(this.value==&quot;Introduce tu dirección de correo electrónico&quot;) ? &quot;&quot; : this.value;" onblur="this.value=(this.value==&quot;&quot;) ? &quot;Enter email address&quot; : this.value;" id="loggedout-follow-field"></p>

			<input type="hidden" name="action" value="subscribe">
			<input type="hidden" name="blog_id" value="31988706">
			<input type="hidden" name="source" value="http://gabrielduarte77.wordpress.com/category/yii-framework/page/2/">
			<input type="hidden" name="sub-type" value="loggedout-follow">

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="85fb924aa9"><input type="hidden" name="_wp_http_referer" value="/category/yii-framework/page/2/">
			<p id="bsub-subscribe-button"><input type="submit" value="Sign me up"></p>
			</form>
					<div id="bsub-credit"><a href="http://wordpress.com/signup/?ref=lof">Ofrecido por WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->
<script type="text/javascript" src="./parte1_files/widgets.js"></script>
<script type="text/javascript" src="./parte1_files/saved_resource(2)"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var themecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter-wpcom/shThemeDefault.css?m=1267535107g&amp;ver=2.1.364b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.getElementsByTagName("head")[0].appendChild(themecss);
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1306158912g';
	SyntaxHighlighter.config.strings.expandSource = 'Mostrar código.';
	SyntaxHighlighter.config.strings.viewSource = 'ver fuente';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copiar al portapapeles';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'imprimir';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.all();
</script>
<script type="text/javascript">
/* <![CDATA[ */
var thickboxL10n = {"next":"Siguiente >","prev":"< Anterior","image":"Imagen","of":"de","close":"Cerrar","noiframes":"Esta funci\u00f3n requiere de frames insertados. Tienes los iframes desactivados o tu navegador no los soporta.","loadingAnimation":"http:\/\/gabrielduarte77.wordpress.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif","closeImage":"http:\/\/gabrielduarte77.wordpress.com\/wp-includes\/js\/thickbox\/tb-close.png"};
var thickboxL10n = {"next":"Siguiente >","prev":"< Anterior","image":"Imagen","of":"de","close":"Cerrar","noiframes":"Esta funci\u00f3n requiere de frames insertados. Tienes los iframes desactivados o tu navegador no los soporta.","loadingAnimation":"http:\/\/gabrielduarte77.wordpress.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif","closeImage":"http:\/\/gabrielduarte77.wordpress.com\/wp-includes\/js\/thickbox\/tb-close.png"};
/* ]]> */
</script>
<script type="text/javascript" src="./parte1_files/saved_resource(3)"></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="./parte1_files/w.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'31988706','v':'wpcom','tz':'0','user_id':'0','subd':'gabrielduarte77'});
ex_go({'crypt':'UE40eW5QN0p8M2Y/RE1LVmwrVi5vQS5fVFtfdHBbPyw1VXIrU3hWLHhzVndTdktBX0ddJnpXRjVaOTd6fj1YMX4ydzR4NTB6Qz9YLFBRWTFdSG15X0JweHguQTRWJVhQPzh8XVMzb3pVSHFTZ2RxZWRhRGMlOXpLTltXQWlibU0rSnFXP1hVeHVfcVpFRVkwOGpGQUNlWCtzQT94eXdLZGl4eDZrVFAxYiZ+PS9UbnJFcUZTQSxXL1l2QUJYR1IubGFTXXVaVnhLOH4vSj9zVDIxb0UxZVdUaWNobl1ZdT10c244VEJ4R3NMUVpGRXh4UyU4eEZSLmJWW1JtRiZfampSaC1PM2RRNGhMWFNRLHJtPXo/X25Bd0dPWzN2cHNHWA=='});
addLoadEvent(function(){linktracker_init('31988706',0);});
	</script><img id="wpstats" src="./parte1_files/g.gif" alt=""><img id="wpstats2" src="./parte1_files/g(1).gif" alt="" style="display:none">
<noscript>&lt;img src="http://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /&gt;</noscript>


</body></html>